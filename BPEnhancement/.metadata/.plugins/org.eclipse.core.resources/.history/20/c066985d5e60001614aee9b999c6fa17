<apex:page standardStylesheets="false" controller="ViewPartCtrl" showChat="false" showHeader="false" sidebar="false">
    <html ng-app="viewPart">
      <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.0-beta.6/angular-animate.js"></script>
      
    <head>
        <title>{!$Label.View_Part_Page_Title}</title>
        
        <c:Css_and_Js />

        <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
       <!-- <apex:includeScript value="{!URLFOR($Resource.AngularResources, 'js/googlemapapiv3.js') }" /> -->
        <apex:includeScript value="{!$Resource.AngularMap}"/>

        <apex:stylesheet value="{!URLFOR($Resource.angular_calender, 'mbdatepicker.css')}"/>    
        <apex:includeScript value="{!URLFOR($Resource.angular_calender, 'mbdatepicker.js')}"/>
        <apex:includeScript value="{!URLFOR($Resource.angular_calender, 'moment.js')}"/>
        
        <!-- Various components -->  
        <!-- <c:NewViewCustomerStyle /> -->
            
        <c:Price_mini_page_layout ></c:Price_mini_page_layout>
        <c:Customer_mini_page_layout />
        <c:NewViewPartRelatedListJS />
        <c:NewPartPopUpOnVendorOrder />
        <!-- <c:PageStyle />  ?? -->
		<c:ModifyCostSummary />
        <c:ResolveOversold />
		<c:ModifyCostSource />
    	<c:PartAdjustmentInStock />
        <c:NewPopupStyle />  
        <c:NewVendorOrderStyle />
        

        <style>

            .costTrackingDropdown .ActionIcons{
                margin-top:0px;
            }
            .Requiredtd, .RequiredtdVal {
                color: #C9302C;
            }
            .RequiredtdVal {
                font-family: 'Open Sans', sans-serif;
                font-weight: 700;
                text-transform: capitalize;
            } 
            .fixedHeaderText .divider {
                margin-top: 0px;
            }

            .req-label:after {
                content:" *";
                color:red;
            }
            .hiddenElements {
                display:none;
            }
            .ActionIcons {
                margin-left: 10px;
                margin-top: 8px;
            }
            .ActionIcons .btn {
                padding: 2px 5px 0px 6px;
                color: #FFF;
                background: #B7BEC6;
                line-height: 1.16;
                font-weight: bold;
                font-size: 12px;
                text-transform: uppercase;
            }
            .round_btn{
                border-radius:3pt;
                padding:3px 0px;
                height: 24px;   
            }
            .rowGeneral .subsectionGeneral {
                padding-left: 10px;
                padding-right: 10px
            }
            .rowGeneral .subsectionGeneral_rightonly {
                padding-right: 10px
            }
            .main_section .rowGeneral {
                padding-right: 4%;
                /* margin-top:18px; /* 24px; */
                margin-bottom: 35px; /* 18px; */
            }
            .main_section .rowStocking {
                /* margin-top:24px; */
                /* margin-bottom: 24px; */
            }
            .Profile_pic {
                padding-right: 0px;
            }
            .rowGeneral .Active_Button {
                Padding: 0px;
                height: 24px;
            }
            .rowGeneral .Active_Button_row {
                Padding-right: 0px;
                margin-top: 12px;
            }
            .rowGeneral .see_more_button {
                padding-top: 0px;
                padding-bottom: 0px;
            }
            .rowGeneral .see_more_button_row {
                margin-top: 20px;
            }
            .rowGeneral .social_icon_row {
                margin-top: 12px;
            }
            .rowGeneral .icon_google {
                color: #d34836;
                font-size: 24px;
            }
            .rowGeneral .icon_in {
                color: #007bb6;
                font-size: 24px;
            }
            .rowGeneral .icon_fb {
                color: #3B5998;
                font-size: 24px;
            }
            .rowGeneral .icon_tweet {
                color: #00AEEF;
                font-size: 24px;
            }
            .favorite {
                font-size: 10px
            }
            .non_favorite {
                margin-left: 9px;
            }
            /* .label_favorite {
                margin-left: 5px;
            } */
            .part_general_column {
                padding-right: 1px;
            }
            /* .rowGeneral .general_info_part .row{
                margin-top: 12px;
            } */
            .rowGeneral .general_info_part .row:nth-child(1){
                margin-top: 12px;
            }
            /* .Vital_Statistics .statistics_row {
                margin-top: 24px;
            } */
            .telemetry_Main {
                border-top: 1px solid #ECF0F1;
                margin-top: 24px;
                padding-top:24px;
            }
            .cou_plus_icon {
                margin-left: 10px;
                color: #939CA9;
            }
            .main_section_COU {
                margin-bottom: 24px;
                margin-top: 24px;
            }
            .main_section_COU .line {
                border-top: 1px solid #ECF0F1;
                margin: 0px 20px 0px 20px;
            }
            /* .main_section_COU_Header .actionRow .sectionText {
                font-weight: bold;
                color: #000000;
                margin-left: 24px;
            } */
            .main_section_COU_Header {
                border-top: 1px solid #ECF0F1;
                margin: 0px 20px 0px 20px;/* margin: 0px 20px 24px 20px; */
                padding-top: 24px;
                border-top: 1px solid #ECF0F1;
            }
            .gid_container_Customer .table {
                border: 0;
            }
            .main_section_COU_Header .actionRow .actionText {
                margin-left: 5px;
                color: #939CA9;
            }
            .clickable_row .first_img {
                height: 30px;
            }
            .clickable_row .first_icon {
                margin-top: 9px;
            }
            .gid_container_Customer .table th {
                border: none;
                padding-top: 15px;
                padding-bottom: 15px;
            }
            .gid_container_Customer .table tbody {
                border: none;
            }
            .gid_container_Customer .table tbody > tr > td {
                border: none;
                padding-top: 2px;
                padding-bottom: 2px;
                vertical-align: middle;
            }
            .gid_container_Customer .table tbody .tddropdown td {
                padding-top: 2px;
                padding-bottom: 2px;
                vertical-align: middle;
            }
            .angucomplete-dropdown {
                width: 100%;
                margin-top: 28px;
            }
            .gid_container_Customer .tableHeader {
                margin-left: -15px;
                margin-right: -15px;
            }
            .gid_container_Customer .S2 {
                margin-left: 12px;
                margin-right: 12px;
            }
            .gid_container_Customer table tr.edit_panel {
                background: #fff;
            }
            .gid_container_Customer table tr.edit_panel,
            .gid_container_Customer table tr.Editable_row {} .gid_container_Customer table tr.edit_panel.show_tr {
                display: table-row;
            }
            .gid_container_Customer table tr.edit_panel input[type="radio"] {
                float: left;
                position: relative;
            }
            /* .gid_container_Customer table tr.edit_panel td .edit_box .edit-body .editform_btn {
                position: absolute;
                right: 20px;
                top: 87px;
                width: 50px;
            } */
            .gid_container_Customer table tr.edit_panel td {
                overflow: hidden;
                height: 0;
                padding-top: 5px;
            }
            .gid_container_Customer table tr.edit_panel td.edit-service-item .serviceitemedit {
                border: 1px dashed #A8A8A8;
                margin: 10px 0px;
                position: relative;
            }
            .gid_container_Customer table tr.edit_panel.animate_tr td {
                border-left: 3px solid #939393;
                height: auto;
                padding: 4px;
            }
            .gid_container_Customer table tr.edit_panel td .edit_box.ng-hide {
                height: 0;
            }
            .gid_container_Customer table tr.edit_panel td .edit_box {
                transition: all 0.5s ease;
            }
            .edit_box {
                transition: .5s linear all;
                height: 130px;
            }
            .gid_container_Customer table tr.edit_panel.animate_tr {
                margin-top: 10px;
                transition: all 0.5s ease;
            }
            .gid_container_Customer table tr.edit_panel td .edit_box .its-heading {
                position: absolute;
                left: 24px;
                top: -15px;
                min-width: 175px;
                background: #fff;
                min-height: 30px;
                padding: 6px;
                font-size: 14px;
                color: #939CA9;
                font-weight: bold;
            }
            .gid_container_Customer .table .clickable_row .edite_btn {
                height: 38px;
                width: 38px;
                float: left;
                padding: 4px;
                margin: 4px 0;
            }
            .gid_container_Customer table tr.edit_panel td .edit_box .edit-body {
                margin: 26px;
            }
            .animate-showContent {
                opacity: 1;
            }
            .animate-showContent.ng-hide-add.ng-hide-add-active,
            .animate-showContent.ng-hide-remove.ng-hide-remove-active {
                -webkit-transition: all ease-in-out 0.1s;
                transition: all ease-in-out 0.1s;
            }
            .animate-showContent.ng-hide {
                line-height: 0;
                opacity: 0;
                padding: 0 10px;
            }
            .caret {
                font-size: 16px
            }
            .statistics_row .tiles {
                padding-left: 10px;
                padding-right: 10px;
            }
            @media screen and (min-width: 1200px) {
                .mb-datepicker {
                    width: 350px;
                }
                .mb-datepicker table {
                    width: 350px;
                    border-spacing: 13px 5px;
                    border-collapse: inherit;
                }
                .mb-datepicker table tbody {
                    display: block;
                    border: 1px solid #B7BEC6;
                    border-collapse: separate;
                    margin: -13px;
                    margin-top: 2px;
                    border-radius: 1px;
                }
            }
            @media screen and (max-width: 1200px) {
                .mb-datepicker {
                    width: 300px;
                }
                .mb-datepicker table {
                    width: 300px;
                    border-spacing: 6px 5px;
                    border-collapse: inherit;
                }
                .mb-datepicker table tbody {
                    display: block;
                    border: 1px solid #B7BEC6;
                    border-collapse: separate;
                    margin: -6px;
                    margin-top: 2px;
                    border-radius: 1px;
                }
            }
            .mb-datepicker {
                background-color: #fff;
                margin-top: 0px;
                margin-left: 10px;
                font-family: 'Open Sans', sans-serif;
            }
            .mb-datepicker table tbody tr td.day-head {
                background-color: #fff;
                border-bottom: 1px solid #FFF;
            }
            .mb-datepicker table tbody tr td.day-head:hover {
                background-color: #fff;
                border-bottom: 1px solid #FFF;
            }
            .header-year-wrapper {
                padding-top: 5px;
                padding-bottom: 5px;
                color: white;
                font-family: \"Open Sans\", sans-serif;
             font-size: 16px;
                background-color: #B7BEC6;
            }
            .header-month {
                width: 66%;
            }
            .header-nav-wrapper {
                padding-top: 2px;
                padding-bottom: 1px;
                color: #fff;
                font-family: \"Open Sans\", sans-serif;
                font-size: 15px;
                background-color: #B7BEC6;
                text-transform: uppercase;
            }
            .header-nav-wrapper .header-item {
                 margin-top:2px
            }
            .mb-datepicker table tbody tr td {
                padding: 4px;
                color: #939CA9;
            }
            .day {
                color: #000 !important;
            }
            .mb-datepicker table tbody tr.days .day-item:hover {
                background-color: #FFF;
                color: #000 !important;
            }
            .today {
                border: 1px solid #00AEEF;
                background-color: #FFF !important;
                color: #000 !important;
            }
            .searchToAdd .input-group{
                border: 2px solid #fff;
                margin-top: -2px;
             }
            #SearchToAddElement > .form-control{
                border: none;
                box-shadow: none;
                height: 32px;
            }
            .viewPartStocking{
            border-top: 1px solid #ECF0F1;
                /* margin-top: 100px; */
                padding-top:24px; 
            }
            .sidePanel .leftPanelLinks .active:after{
                   content: none; 
                
            }
                
            .statistics_row .C7 > div {
                padding-top:20px;
                padding-left: 20px;
                padding-right: 20px;
                text-align: center;
            }
            
            .viewPartStocking  .main_section_COU {
                 margin-left: -20px;
            }
            
            .rowStocking .stockButtons {
                /* margin: 12px 5px; */
                margin : 0 5px;
            }
            .chk_tick .chksqure {
                   font-size: 0px;
                   height: 12px;
                   width: 12px;
                   margin: 3px;
                   border-radius: 2px;
                   background: #D8D8D8;
               }
              .chked .chksqure {
                   font-size: 0px !important;
                   height: 12px;
                   width: 12px;
                   margin: 3px;
                   border-radius: 2px;
                   background: #71BF3E;
               }
               .chk_tick {
                width: 20px !important;
                height: 20px !important;
                border-radius: 4px;
                margin: 3px 15px;
                border: 1px solid #cccccc;
                display: block;
                float: left;
                cursor: pointer;
                }
                
                /**edit row**/
                .gid_container_Customer .table tbody > tr > td i.servicesitem

                {
                    background: #CEC7C7;
                     padding:5px;
                    border-radius: 3px;

                }
                .gid_container_Customer table tr.edit_panel td .serviceitemedit{
                     margin: 10px 0;

                }
                .gid_container_Customer table tr.edit_panel td.edit-service-item .serviceitemedit.ng-hide{
                    height: 0;

                }
                .gid_container_Customer table tr.edit_panel td.edit-service-item .serviceitemedit{
                    border: 1px solid #BBE5F9;
                    height: 130px;
                    transition: all 0.5s ease;


                
                }
                .gid_container_Customer table tr.edit_panel td.edit-service-item .serviceitemedit .its-heading{
                    position: static;

                }
                .Related_section_part_container {
                    margin: 0px 0px 0px 0px;
                }
                .Related_section_part_container .gid_container_Customer table tr.edit_panel td .serviceitemedit .edit-body .editform_btn{
                    right:auto;
                    width:70px;
                    top: 90px;

                }
                .Related_section_part_container .gid_container_Customer table tr.edit_panel td .serviceitemedit .edit-body .editform_btn{
                    top: 90px;
                }
                
                .Related_section_part_container .gid_container_Customer table tr.edit_panel td.edit-service-item .serviceitemedit{
                    height: 130px;
                }
                
                .Related_section_part_container .gid_container_Customer table tr.edit_panel td .serviceitemedit .edit-body .radio label, .checkbox label{
                    height: 30px;
                }
                
                .gid_container_Customer .table tbody  tr  td.BL{
                border-left:1px solid #999;

                }
                .Related_section_part_container .gid_container_Customer table tr.edit_panel td .serviceitemedit .edit-body{
                    margin: 15px 26px 15px 0px;

                }
                
                .gid_container_Customer table tr.edit_panel td .serviceitemedit .edit-body .radio label, .checkbox label{
                    padding: 0;
                    height: 30px;

                }
                .edit-service-chek{
                    margin: 0;
                    margin-right:10px;

                }
                .serviceLabeledit{
                    width:123px; 
                    padding:0;


                    margin: 0;



                    outline:none;
                    height: 20px;
                    float: left;
                    margin-left:3px;

                }


                .edittext{
                    width:122px;
                    display: inline-block;
                    float: left;
                    text-overflow: ellipsis;
                    white-space: nowrap;
                    overflow: hidden;
                    margin-left: 5px;


                }
                .show_Availableline{
                    background: #71BF3E;
                    color: #fff;
                    padding-left: 10px;

                }
                .bgRed{
                    background: #E80000 ;


                }
                .fixedContent .fa-refresh , .fixedContent .fa-floppy-o, .fixedContent .fa-cog{color:#000}
                
                .fixedContent .viewVendorSearchBox {
                    width: 60%;
                    padding-left: 0;
                    padding-right: 0;
                }
                .dropdown ul li:hover{
                    cursor: pointer;
                }
                .mutedgray {
                    opacity: .65;
                }
                .disabledModifyCostSummary {
                    opacity: .65;
                }
                .disabledModifyCostSummary a{
                    cursor: default;
                }
                
               /*  Added by pooja */
               .userNameblock_Part_ML5	{
               	margin-left: 5px;
               }
        </style>
          
        
    
    
     
    <script>
    

        var viewPart = angular.module(  'viewPart', 
                                            ['BPGlobalHeader', 'searchToAddModule', 'viewPartRelatedListModule', 'ngAnimate', 'ui-notification' , 'PartPopUpModule' ,'PartPopUpModuleOnLoad' , 'materialDatePicker','addPartAdjustModel','resolveOversoldModel', 'modifyCostSummaryModel','modifyCostSourceModel' ]
                                        );
                                        
        viewPart.controller('viewPartController', function ($scope, $timeout, $rootScope, PartInfoService, Notification) {
                // ViewPart page variable
                $scope.ViewPart = {};
                $scope.CustomerModal = {};
                $scope.COUModal = {};
				$scope.ViewPart.disableModifyCostSummary = false;
                $scope.ViewPart.adjustPart = {};
                $scope.ViewPart.adjustPart.showAdjustPreview = true;
                $scope.ViewPart.adjustPart.isPreviewActive = true;
                $scope.ViewCustomer = {};
                $scope.modifyCostSoourceeditMode = true;
                $scope.currentSelectedBucket={};
                $scope.ViewPart.OverSold = [];
                $scope.ViewPart.toggle = false;
                $scope.ViewPart.modifyCostSummaryModel = {};
                $scope.ViewPart.modifyCostSummaryModel.showPreview = true;
                $scope.ViewPart.adjustPart.SelectedInStock = 'select'



                $scope.ViewPartRelatedListModal = {};
                
                $scope.SearchToadd = {};
                $scope.SearchableObjects = 'Part__c,Sales_Tax_Item__c';
                $scope.typeToSearch = "";
                $scope.PreferredObject = "Merchandise";
                
                
                $scope.ViewPart.partId = "{!JSENCODE(URLENCODE($CurrentPage.parameters.id))}";

                
                $scope.ViewPart.helpText = {    General         :   '{!$Label.General_Help_Text}',
                                                Stocking        :   '{!$Label.Stocking_Help_Text}',
                                                Statistics      :   '{!$Label.Statistics_Help_Text}',
                                                VitalStatistics :   '{!$Label.VitalStatistics_Help_Text}',
                                                Telemetry       :   '{!$Label.Telemetry_Help_Text}',
                                                Related         :   '{!$Label.Related_Help_Text}',
                                                ActiveOrders    :   '{!$Label.ActiveOrders_Help_Text}',
                                                ActiveSalesOrders   :   '{!$Label.ActiveSalesOrders_Help_Text}',
                                                AlternateParts  :   '{!$Label.AlternateParts_Help_Text}',
                                                TaxExemptions   :   '{!$Label.TaxExemptions_Help_Text}' ,
                                                CostSummary     :   '{!$Label.CostSummary_Help_Text}' ,
                                                CostDetails     :   '{!$Label.CostDetails_Help_Text}'


                                    };
                                    
         
                 $scope.ViewPart.displaySections = {
                'Info' : true,
                'Statistics' : true,
                'Related' : true,
                'CostTracking' : true
            };
         

            $scope.setFocusToSearchBox = function () {
                angular.element('#SearchToaddCutomer').focus();
            }

            $scope.ViewPart.activeSidepanelink = '#InfoSection';
            $scope.ViewPart.selectedItem = 'Info';

            $scope.ViewPart.dropDownItem = function (event, selectedSection) {
                var activeSection = $scope.ViewPart.activeSidepanelink.replace('#','');
                $scope.ViewPart.selectedItem = selectedSection;
                if(activeSection != selectedSection) {
                    $scope.ViewPart.sidepanelLink(event, selectedSection);
                    
                }
            }
            
            angular.element(document).off("scroll");
            angular.element(document).on("scroll", function () {
                $scope.ViewPart.onScroll();
            });

            $scope.ViewPart.sidepanelLink = function (event, relatedContent) {
                event.preventDefault();
                $scope.ViewPart.displaySections[relatedContent] = true;
                angular.element(document).off("scroll");
                var target = angular.element(event.target.closest('a')).attr("href");
                angular.element('html, body').stop().animate({
                    scrollTop : angular.element(target).offset().top - 120
                }, 500, function () {
                    angular.element(document).on("scroll", function () {
                        $scope.ViewPart.onScroll();
                    });
                    $scope.ViewPart.onScroll();
                });
            }

            
            $scope.ViewPart.onScroll = function () {
                var activeSidepanelink;
                var selectedItem;
                var heading = '';
                debug('****'+angular.element('#InfoSection').position().top);
                var scrollPos = angular.element(document).scrollTop();
                if (scrollPos < angular.element('#InfoSection').position().top + angular.element('#InfoSection').height() + 95) //50
                {
                    activeSidepanelink = '#InfoSection';
                    selectedItem = 'Info';
                } else if (scrollPos < angular.element('#StatisticsSection').position().top + angular.element('#StatisticsSection').height() + 95) //50
                {
                    activeSidepanelink = '#StatisticsSection';
                    selectedItem = 'Statistics';
                } else if (scrollPos < angular.element('#RelatedSection').position().top + angular.element('#RelatedSection').height() + 70) //50
                {
                    activeSidepanelink = '#RelatedSection';
                    selectedItem = 'Related';
                } else if (scrollPos < angular.element('#CostTrackingSection').position().top + angular.element('#CostTrackingSection').height() + 80) //50
                {
                    activeSidepanelink = '#CostTrackingSection';
                    selectedItem = 'Cost Tracking';
                } else {  
                    activeSidepanelink = '#CostTrackingSection';
                     selectedItem = 'Cost Tracking';
                }
                
                $scope.ViewPart.activeSidepanelink = activeSidepanelink;
                $scope.ViewPart.selectedItem = selectedItem;
                if (!$scope.$$phase) {
                    $scope.$digest();
                }
            }
            
            
             $scope.ViewPart.getLocations = function() {
                    if($scope.ViewPart.PartInfo != undefined && $scope.ViewPart.PartInfo.PartDetailRec.Location != null) {
                        return $scope.ViewPart.PartInfo.PartDetailRec.Location.split(';');
                    }
                }
            
             $scope.ViewPart.currentStock = true;
            //Change active button
                $scope.ViewPart.changeActiveButton = function (item) {
                    $scope.ViewPart.activeButton = item;
                    debug("button: "+$scope.ViewPart.activeButton);
                    $rootScope.$broadcast('activeButtonChanged', {item:$scope.ViewPart.activeButton});
                    
                }
            
            // resize left side panel   
             $scope.ViewPart.calculateSidebarHeight = function(){
                 windowheight = screen.height;
                  var leftPanelLinks =  windowheight - ( angular.element(".headerNav").height() + angular.element(".sidepaneluserinfo").height() + angular.element(".statusRow").height() + 52);//window
                  angular.element(".leftPanelLinks").css("height", leftPanelLinks);
               
             }
            
            // Load Customer Infomration
                $scope.ViewPart.loadPartInfo = function(){
                    var partId = $scope.ViewPart.partId;
                    PartInfoService.getPartInfo(partId).then(function(partInfo) {
                        $scope.ViewPart.PartInfo = partInfo;
                        debug("part Ingp");
                        debug(partInfo);



                        $scope.ViewPart.bindPartData(partInfo);

                        $scope.ViewPart.ShowContent = true;
                        $scope.ViewPart.changeActiveButton('CurrentStock');
                        // resize left side panel   
                        setTimeout(function(){ $scope.ViewPart.calculateSidebarHeight(); }, 10);
                        
                        // View Part related list modals load
                        $scope.ViewPartRelatedListModal.PartRelatedInfo = partInfo.PartRelatedInfo;
                        

                        $scope.ViewPart.PartInfo.PartFIFOBucketList = partInfo.PartFIFOBucketList;

                        
                        



                        $scope.ViewPartRelatedListModal.PartId = $scope.ViewPart.partId;
                        $scope.ViewPartRelatedListModal.PartIsTaxable = $scope.ViewPart.PartInfo.PartDetailRec.IsTaxable;
                        $scope.ViewPartRelatedListModal.initModals();
                        $scope.SearchToAddCallback = $scope.ViewPartRelatedListModal.searchToAddCallback;
                        $scope.ViewPart.openpartpopupOnLoad($scope.ViewPart.partId);
                        $scope.ViewPart.isrefresh = false;
                        //$scope.ViewPart.loadChartData();
                    }, function(errorSearchResult) {
                        $scope.ViewPart.PartInfo = errorSearchResult;
                        $scope.ViewPart.isrefresh = false;
                    });
                }
                

                $scope.ViewPart.bindPartData = function(partInfo){
                    $scope.ViewPart.PartInfo = partInfo;
                    $scope.ViewPart.ShowContent = true;
                    
                    // View Part related list modals load
                    $scope.ViewPartRelatedListModal.PartRelatedInfo = partInfo.PartRelatedInfo;
                    $scope.ViewPart.PartInfo.PartFIFOBucketList = partInfo.PartFIFOBucketList;

                    for(var i=0;i<$scope.ViewPart.PartInfo.PartFIFOBucketList.length;i++){
	                    	$scope.ViewPart.PartInfo.PartFIFOBucketList[i].isEdit = false;
	                    	debug($scope.ViewPart.PartInfo.PartFIFOBucketList.length==0 || $scope.ViewPart.PartInfo.PartFIFOBucketList[i].SourceName.replace(' ','') == 'VendorReceiving' || $scope.ViewPart.PartInfo.PartFIFOBucketList[i].RemainingQty == 0);
							if($scope.ViewPart.PartInfo.PartFIFOBucketList.length==0 || $scope.ViewPart.PartInfo.PartFIFOBucketList[i].SourceName.replace(' ','') == 'VendorReceiving' || $scope.ViewPart.PartInfo.PartFIFOBucketList[i].RemainingQty == 0){
	            				$scope.ViewPart.disableModifyCostSummary = true;
	            			}
                   	}


                    $scope.ViewPartRelatedListModal.PartId = $scope.ViewPart.partId;
                    $scope.ViewPartRelatedListModal.PartIsTaxable = $scope.ViewPart.PartInfo.PartDetailRec.IsTaxable;
                    $scope.ViewPartRelatedListModal.initModals();
                    $scope.SearchToAddCallback = $scope.ViewPartRelatedListModal.searchToAddCallback;
                    
                    //$scope.ViewPart.loadChartData();



                } 
                

                // START: PART POPUP ATTRS AND METHODS
                
                // Modals for Add/Edit Part component
                $scope.ViewPart.createPart = function(){
                    $rootScope.$broadcast('AddPartEvent');
                }
                
                $scope.ViewPart.editPart = function(){
                debug("before edit : "+$scope.ViewPart.partId);
                    $rootScope.$broadcast('EditPartEvent', {partId : $scope.ViewPart.partId});
                }
                
                $scope.partRecordSaveCallback = function() {
                    $scope.ViewPart.loadPartInfo();
                }
                $scope.ViewPart.adjustStock = function(){


                    var stockAdjsutmentList = [];
                    for(var i=0;i<$scope.ViewPart.PartInfo.PartFIFOBucketList.length;i++){
                        if($scope.ViewPart.PartInfo.PartFIFOBucketList[i].RemainingQty > 0 ){
                            stockAdjsutmentList.push($scope.ViewPart.PartInfo.PartFIFOBucketList[i]);
                        }
                    }
                    $scope.$broadcast('AdjustStockEvent', $scope.ViewPart.partId, stockAdjsutmentList,$scope.ViewPart.PartInfo.PartDetailRec);


                }
                $scope.ViewPart.openResolveOversoldPopup = function(event, partId){
                    $scope.ViewPart.OverSold = [];
                    $scope.ViewPart.OverSold.Total = 0;
                    $scope.ViewPart.OverSold.Quantity = 0;
                    for(var i=0;i<$scope.ViewPart.PartInfo.PartFIFOBucketList.length;i++){
                        if($scope.ViewPart.PartInfo.PartFIFOBucketList[i].SourceName == 'Oversold' && $scope.ViewPart.PartInfo.PartFIFOBucketList[i].RemainingQty < 0){
                            $scope.ViewPart.OverSold.Total += -($scope.ViewPart.PartInfo.PartFIFOBucketList[i].Total);
                            $scope.ViewPart.OverSold.Quantity +=  -($scope.ViewPart.PartInfo.PartFIFOBucketList[i].RemainingQty);
                            $scope.ViewPart.OverSold.push($scope.ViewPart.PartInfo.PartFIFOBucketList[i]);
                            
                        }
                     }
                        debug('Hii');

                        debug($scope.ViewPart.OverSold);
                        if($scope.ViewPart.OverSold.length == 0){
                             Notification.error("No Line item is there please add line item");
                        }
                        else{
                            $scope.$broadcast('resolveOversoldEvent', $scope.ViewPart.OverSold  );

                        }

                    } 
                    $scope.ViewPart.showHideRecords = function(){
                	$scope.ViewPart.toggle = !$scope.ViewPart.toggle;
                    PartInfoService.showHideFifoRecords($scope.ViewPart.partId, $scope.ViewPart.toggle).then(function (successfulSearchResult) {
                    debug(successfulSearchResult);
                    $scope.ViewPart.PartInfo.PartFIFOBucketList = successfulSearchResult;
                    
                                
                        },
                        function (errorSearchResult) {
                            responseData = errorSearchResult;  
                        });
                
                }
                $scope.$on('OversoldUpdate', function(event, args) {  
                    $scope.ViewPart.bindPartData(args);
                    $scope.ViewPart.toggle = false;
                    
                 });
                $scope.$on('ModifyCostSourceUpdateBucketEvent',function(event,args){
                    $scope.currentSelectedBucket = {};
                    $scope.modifyCostSoourceeditMode= true;
                })
                 $scope.ViewPart.updateFifoBucketLineItem = function(FifoBucketHeaderIndex){
                    debug("fifo bucket");
                    debug(FifoBucketHeaderIndex)
                     for(var i=0;i<$scope.ViewPart.PartInfo.PartFIFOBucketList.length;i++){
                     if(i!=FifoBucketHeaderIndex){
                            $scope.ViewPart.PartInfo.PartFIFOBucketList[i].isEdit = false;
                      }
                      else{
                         $scope.ViewPart.PartInfo.PartFIFOBucketList[FifoBucketHeaderIndex].isEdit = !$scope.ViewPart.PartInfo.PartFIFOBucketList[FifoBucketHeaderIndex].isEdit;
                      } 
                     }
                   
                    debug( $scope.ViewPart.PartInfo.PartFIFOBucketList[FifoBucketHeaderIndex].isEdit);
                    if($scope.ViewPart.PartInfo.PartFIFOBucketList[FifoBucketHeaderIndex].SourceName !='Vendor Receiving' && $scope.ViewPart.PartInfo.PartFIFOBucketList[FifoBucketHeaderIndex].SourceName !='Vendor recieving'  && $scope.ViewPart.PartInfo.PartFIFOBucketList[FifoBucketHeaderIndex].SourceName !='Oversold'){
                        $scope.modifyCostSoourceeditMode= false;
                   }
                }
                 $scope.ViewPart.openModifyCostSourcePopup = function(event){
                        for(var index= 0;index <  $scope.ViewPart.PartInfo.PartFIFOBucketList.length;index++){
                            var fifobucket = $scope.ViewPart.PartInfo.PartFIFOBucketList[index];
                            debug(fifobucket);
                            debug('fifobucket');


                            if(fifobucket.isEdit == true){
                                $scope.currentSelectedBucket = fifobucket;
                            }
                        }
                        debug($scope.currentSelectedBucket === {});
                        debug(JSON.stringify($scope.currentSelectedBucket) == '{}');
                        if(JSON.stringify($scope.currentSelectedBucket) == '{}' || $scope.currentSelectedBucket == null ||  angular.isUndefined($scope.currentSelectedBucket)){
                                    $scope.modifyCostSoourceeditMode=true;
                                    debug('$scope.modifyCostSoourceeditMode')
                        }
                        debug($scope.modifyCostSoourceeditMode)
                        if($scope.currentSelectedBucket != null &&  angular.isDefined($scope.currentSelectedBucket) && JSON.stringify($scope.currentSelectedBucket) != '{}'){
                            if($scope.currentSelectedBucket.SourceName =='Oversold' || $scope.currentSelectedBucket.SourceName =='Vendor Receiving' || $scope.currentSelectedBucket.SourceName =='Vendor recieving'){
                                $scope.modifyCostSoourceeditMode=true;
                            }
                            else{
                                $scope.modifyCostSoourceeditMode=false;
                            }
                            if(!$scope.modifyCostSoourceeditMode){
                                $scope.$broadcast('ModifyCostSourceEvent',  {selectedbucket : $scope.currentSelectedBucket});
                            }
                            if($scope.currentSelectedBucket.SourceName =='Vendor Receiving' || $scope.currentSelectedBucket.SourceName =='Vendor recieving'){
                                    Notification.error('Cost cannot be adjusted when Receivings have not been matched with Vendor Invoices');
                            }
                                                        
                        }
                        if(JSON.stringify($scope.currentSelectedBucket) == '{}'){
                                    $scope.modifyCostSoourceeditMode=true;
                        }
                    }
                     $scope.ViewPart.openModifyCostSummaryPopup = function(event, partId){
                        debug("inside summary part popuop");
                        var ModifyCostSummaryList = [];
                        
                        for(var i =0; i< $scope.ViewPart.PartInfo.PartFIFOBucketList.length;i++){
                            if($scope.ViewPart.PartInfo.PartFIFOBucketList[i].RemainingQty>0 && $scope.ViewPart.PartInfo.PartFIFOBucketList[i].SourceName != 'Vendor Receiving'){
                                ModifyCostSummaryList.push($scope.ViewPart.PartInfo.PartFIFOBucketList[i]);
                            }
                        }
                        if(ModifyCostSummaryList.length == 0){
                             Notification.error("No Line item is there please add line item");
                        }
                        else{


                            $scope.$broadcast('ModifyCostSummaryEvent',  ModifyCostSummaryList);
                        }
                         
                }


                 $scope.$on('modifyCostUpdate', function(event, args) {  
                      $scope.ViewPart.bindPartData(args);
                      $scope.ViewPart.toggle = false;
                 });
                 
                  $scope.$on('stockAdjustment', function(event, args) {  
                    $scope.ViewPart.bindPartData(args);
                    $scope.ViewPart.toggle = false;
                 });
                 $scope.$on('modifyCostSourceAdjustment', function(event, args) {  
                    $scope.ViewPart.bindPartData(args);
                    $scope.ViewPart.toggle = false;
                 });
                 
                 

                // END: PART POPUP ATTRS AND METHODS
                
                // Set focus on search text box
                // used when to add related records via page level search box
                $scope.ViewPart.setFocusToSearchBox = function (typeToSearch) {
                    $scope.typeToSearch = typeToSearch;
                    $scope.PreferredObject = typeToSearch;
                    angular.element('#SearchToaddCutomer').focus();
                }
                
                // Reset the search object in serch autocomplete
                $scope.ViewPart.resetSearchBox = function () {
                    $scope.typeToSearch = "";
                    $scope.PreferredObject = "";
                }
                
                 // part popup functions
                $scope.ViewPart.openpartpopupOnLoad = function (partId) {
                     debug("load popup")

                       $scope.$broadcast('PartPopUpEventOnLoad',  partId);
               }
              /* $scope.ViewPart.hidePartPopUp =function(){
                    angular.element('.Vendor-Order-Part-Popup').hide();
               }  */
               
               // refresh
                $scope.ViewPart.refreshViewPart = function(){
                        $scope.ViewPart.isrefresh = true;
                        $scope.ViewPart.loadPartInfo();
                		$scope.ViewPart.toggle = false; 
                    }
             /*  
               $scope.VendorOrderModel.loadAllGridDetails = function() {
                if ($scope.VendorOrderModel.voHeaderId != null) {
                    var RequiredType=null 
                    //Called service to get Vendor Order line
                    vendorOrderService.getVOLineItem($scope.VendorOrderModel.voHeaderId, 
                                                     $scope.VendorOrderModel.itemsPageSortAttrsJSON, 
                                                     $scope.VendorOrderModel.customersPageSortAttrsJSON, 
                                                     $scope.VendorOrderModel.stocksPageSortAttrsJSON,
                                                     RequiredType
                                                    )
                    .then(function (successfulResult) {
                    debug("successfull");
                    debug(successfulResult);
                        $scope.VendorOrderModel.populatePageModels(successfulResult);
                        $scope.ViewPart.isrefresh = false;
                    });
                }
            }
            
            // Method for DOM action: Update Order Status for Vendor Order Header
            $scope.VendorOrderModel.updateVOHederOrderStatus = function (status) {
                if(status != null){
                    $scope.VendorOrderModel.VendorOrderHeader.Status = status;
                }
                
                vendorOrderService.updateVOHederOrderType($scope.VendorOrderModel.voHeaderId, $scope.VendorOrderModel.VendorOrderHeader.OrderType.Id, $scope.VendorOrderModel.VendorOrderHeader.Status)
                .then(function(resultInfo) {
                    if(status == null){
                        $scope.VendorOrderModel.loadAllGridDetails();
                    }
                    Notification.success('Successfuly updated.');
                }, function(errorSearchResult) {
                    Notification.error('Some error occurred, please try again.');
                });
            }
            
            //Load suggestion and items of a vender order
            $scope.VendorOrderModel.loadVendor = function () {
                $scope.VendorOrderModel.voHeaderId = "{!JSENCODE(URLENCODE($CurrentPage.parameters.id))}" ? "{!JSENCODE(URLENCODE($CurrentPage.parameters.id))}" : null;

                $scope.VendorOrderModel.setDefaultPageSortAttrs();
                $scope.SearchToAddCallback = $scope.VendorOrderModel.searchToAddCallback;
                
                $scope.VendorOrderModel.loadAllGridDetails();
                $scope.VendorOrderModel.populateLeftSideHeadingLables();
            }
            */
               
               // part popup
               $scope.applyCssOnPartPopUp = function (event, className) {
                   var targetEle = angular.element(event.target);
                   var elementWidth = targetEle.width();
                   if (targetEle.width() > targetEle.parent().width()) {
                       elementWidth = targetEle.parent().width() - 15;

                   }
                   angular.element(className).css('top', targetEle.offset().top);
                   angular.element(className).css('left', event.clientX);
                   setTimeout(function(){  angular.element(className).show(); }, 1000); 
               }
                var timer;
                $scope.ViewPart.openpartpopup = function (event, partId) {
                debug("hover popup")
                     timer = $timeout(function () {
                        //var partId = $scope.CustomerOrderModel.VORLineItemGroupList[index].PartId;
                        debug("replaced by id : "+partId);
                        $scope.$broadcast('PartPopUpEvent',  partId);
                        $scope.applyCssOnPartPopUp(event, '.PartPopupOnVenderOrder');

                     }, 1000);
                 }
                
                  $scope.ViewPart.hidePartPopUp =function(){
                     $timeout.cancel(timer);
                     angular.element('.Vendor-Order-Part-Popup').hide();
                 }
                 
                 

                 $scope.ViewPart.ShowMessage = function(){
                    Notification.error('First resolve the oversold situation by selecting the “Resolve Oversold” action');
                }

         
         });
         
         
         
          viewPart.service("PartInfoService", function ($q) {
                    this.getPartInfo= function(partId)
                    {	
                   		partId = encodeString(partId);

                        var deferred = $q.defer();
                        Visualforce.remoting.Manager.invokeAction(
                            '{!$RemoteAction.ViewPartCtrl.getPartInfo}',
                                partId,

                            function (result, event) {
                               if (event.type == 'exception') {
                                    deferred.reject(event.message);
                                } else {
                                    var partInfo = decodeString(result);
                                    var find = '\'';




                                    var re = new RegExp(find, 'g');
                                    partInfo = partInfo.replace(re, '');
                                    deferred.resolve(JSON.parse(partInfo));
                                }
                            }, {
                                escape : true
                        });




                        return deferred.promise;
                    }
                    this.showHideFifoRecords= function(partId, showHide)
                	{
	               		partId = encodeString(partId);

	                     	var deferred = $q.defer();
	                     	Visualforce.remoting.Manager.invokeAction(
	                         '{!$RemoteAction.ViewPartCtrl.getHistoryRecords}',
	                             partId, showHide,
	                         function (result, event) {
	                            if (event.type == 'exception') {
	                                 deferred.reject(event.message);
	                             } else {
	                                 var partInfo = decodeString(result);
	                                 var find = '\'';




	                                 var re = new RegExp(find, 'g');
	                                 partInfo = partInfo.replace(re, '');
	                                 deferred.resolve(JSON.parse(partInfo));
	                             }
	                         }, {
	                             escape : true
	                     });




	                     return deferred.promise;
                	}

                });

    </script>
    </head>
    
             <body  ng-controller="viewPartController" ng-init="ViewPart.loadPartInfo()" ng-cloak="ng-cloak">
        <c:BPGlobalHeader />
        <div class="content">
            <div class="col-lg-2 col-md-2 sidePanel ">
                <div class="sidepaneluserinfo row">
                    <!-- <div class="userimg">
                        <div style="float:left;background-color: #373c40; border-radius: 5px; padding: 1px; margin-right: 5px;">
                                <img  src="{!URLFOR($Resource.Images, 'star.png')}" style="height:35px; width:35px; padding: 5px;"/>
                        </div>
                    </div> -->
                    <div class="userNameblock userNameblock_Part_ML5">
                        <p class="T3"> 
                       <!--  <span ng-show="ViewPart.CustomerInfo.CustomerInfo.Type == 'Individual'"> {{ViewPart.CustomerInfo.CustomerInfo.FirstName}} {{ViewPart.CustomerInfo.CustomerInfo.LastName}}</span> -->
                        <!-- <span ng-show="ViewPart.CustomerInfo.CustomerInfo.Type != 'Individual'"> {{ViewPart.PartInfo.PartDetailRec.VendorName}} </span> -->
                        <span> {{ViewPart.PartInfo.PartDetailRec.Description}} </span>
                        </p>
                        <p class="customerNumber">{{ViewPart.PartInfo.PartDetailRec.PartNumber}}</p>
                    </div>
                </div>
                <div class="clearfix"></div>
                <div class="row statusRow">
                   <!--  <span class="userType T3" ng-show="ViewPart.CustomerInfo.CustomerInfo.Type == 'Individual'">Individual</span>
                    <span class="userType T3" ng-show="ViewPart.CustomerInfo.CustomerInfo.Type != 'Individual'">Business</span> -->
                    
                    <span class="userType T3" ng-class="{'green' : ViewPart.PartInfo.PartDetailRec.Status == '{!$Label.Part_Object_Status_InStock}', 'red' : (ViewPart.PartInfo.PartDetailRec.Status == '{!$Label.Part_Object_Status_Required}' || ViewPart.PartInfo.PartDetailRec.Status == '{!$Label.Part_Object_Status_OutofStock}'), 'blue' : ViewPart.PartInfo.PartDetailRec.Status == '{!$Label.Part_Object_Status_Committed}', 'gray': alternateOrder.Status == '{!$Label.Part_Object_Status_OnOrder}'}">
                    {{ViewPart.PartInfo.PartDetailRec.Status}}</span>
                </div>
                
                
                <div class="leftPanelLinks">
                    <a class="row T10 mainSectionLink" ng-class="{'active' : ViewPart.activeSidepanelink =='#InfoSection'}" 
                        href="#InfoSection" ng-click="ViewPart.sidepanelLink($event, 'Info')" ><span class="alphabetLetter">A</span>{!$Label.Page_Section_Info}</a>
                    <a class="row T10 subSectionLink" href="#InfoSection" ng-click="ViewPart.sidepanelLink($event, 'Info')">  <!--  href="#Info_General" -->
                        <span class="alphabetLetter"></span>{!$Label.Page_Section_General}</a>
                    <a class="row T10 subSectionLink" href="#Info_Stocking" ng-click="ViewPart.sidepanelLink($event, 'Info')">
                        <span class="alphabetLetter"></span>{!$Label.Page_Section_Stocking}</a>
                        
                        
                    <a class="row T10 mainSectionLink" ng-class="{'active' : ViewPart.activeSidepanelink =='#StatisticsSection'}" 
                        href="#StatisticsSection" ng-click="ViewPart.sidepanelLink($event, 'Statistics')" ><span class="alphabetLetter">B</span>{!$Label.Page_Section_Statistics}</a>                    
                    <a class="row T10 subSectionLink" href="#Vital_Statistics" ng-click="ViewPart.sidepanelLink($event, 'Statistics')">
                        <span class="alphabetLetter"></span>{!$Label.Page_Section_VitalStatistics}</a>
                    <!-- <a class="row T10 subSectionLink hiddenElements" style="display:none" href="#Telemetry_Statistics" ng-click="ViewPart.sidepanelLink($event, 'Statistics')">
                        <span class="alphabetLetter"></span>{!$Label.Page_Section_Telemetry}</a> -->  <!-- hidden -->
                    
                    <a class="row T10 mainSectionLink" ng-class="{'active' : ViewPart.activeSidepanelink =='#RelatedSection'}" 
                        href="#RelatedSection" ng-click="ViewPart.sidepanelLink($event, 'Related')" ><span class="alphabetLetter">C</span>{!$Label.Page_Section_Related}</a>
    <!--                 <a class="subSectionLink row T10" href="#RelatedSection" ng-click="ViewPart.sidepanelLink($event)"> -->
    <!--                     <span class="alphabetLetter"></span>Active Orders</a> -->
                    <a class="row T10 subSectionLink" href="#VP_Active_Orders_block_heading_panel" ng-click="ViewPart.sidepanelLink($event, 'Related')">
                        <span class="alphabetLetter"></span>{!$Label.Page_Section_Active_Vendor_Order}</a>  <!-- {!$Label.Page_Section_ActiveOrder} -->
                    <a class="row T10 subSectionLink" href="#VP_Active_Sales_Orders_block_heading_panel" ng-click="ViewPart.sidepanelLink($event, 'Related')">
                        <span class="alphabetLetter"></span>{!$Label.Active_Sales_Orders}</a>
                    <a class="row T10 subSectionLink" href="#VP_Alternate_Parts_block_heading_panel" ng-click="ViewPart.sidepanelLink($event, 'Related')">
                        <span class="alphabetLetter"></span>{!$Label.Page_Section_AlternateParts}</a>
                    <!-- <a class="row T10 subSectionLink" href="#VP_Tax_Exemptions_block_heading_panel" ng-click="ViewPart.sidepanelLink($event, 'Related')">
                        <span class="alphabetLetter"></span>{!$Label.Page_Section_TaxExemptions}</a>
                     -->    
                    <a class="row T10 mainSectionLink" ng-class="{'active' : ViewPart.activeSidepanelink =='#CostTrackingSection'}" 
                        href="#CostTrackingSection" ng-click="ViewPart.sidepanelLink($event, 'CostTracking')" ><span class="alphabetLetter">D</span>{!$Label.Page_Section_Cost_Tracking}</a>
                    <a class="row T10 subSectionLink" href="#Cost_Summary" ng-click="ViewPart.sidepanelLink($event, 'CostTracking')">
                        <span class="alphabetLetter"></span>{!$Label.Page_Section_Cost_Summary}</a>
                    <a class="row T10 subSectionLink" href="#Cost_Details" ng-click="ViewPart.sidepanelLink($event, 'CostTracking')">
                        <span class="alphabetLetter"></span>{!$Label.Page_Section_Cost_Details}</a>
                    
                </div>
                
            </div>
            <div class="col-lg-10 col-md-10 mainSection" style="margin-top: 98px;">
            <div class=" sectionHeader row fixedRow" >
                <div class="col-lg-6 col-md-6" ng-show="ViewPart.activeSidepanelink =='#InfoSection'">
                    <div class="fixedHeaderText">
                        <span class="headerlabel">
                        <i class="fa fa-angle-right" style="width:10px; padding: 0 3px;"
                            ng-show="!ViewPart.displaySections.Info"
                            ng-Click="ViewPart.displaySections.Info = true">
                        </i> 
                        <i class="fa fa-angle-down" style="width:10px;"
                            ng-show="ViewPart.displaySections.Info"
                            ng-Click="ViewPart.displaySections.Info = false">
                        </i> 
                        <span class="divider">|</span>
                        <span class="T2">A {!$Label.Page_Section_Info}</span>
                        </span>
                         <!--  <span class="ActionIcons pull-left ">
                               <div class="dropdown selectDropdown checkboxDropdown">
                                  <button class="btn dropdown-toggle" type="button" data-toggle="dropdown">{!$Label.Label_Actions}
                                  <span class="caret"></span></button>
                            </div>
                        </span> --> 
                    </div>
                </div>
                <div class="col-lg-6 col-md-6" ng-show="ViewPart.activeSidepanelink =='#StatisticsSection'">
                    <div class="fixedHeaderText">
                        <span class="headerlabel">
                        <i class="fa fa-angle-right" style="width:10px; padding: 0 3px;"
                            ng-show="!ViewPart.displaySections.Statistics"
                            ng-Click="ViewPart.displaySections.Statistics = true">
                        </i> 
                        <i class="fa fa-angle-down" style="width:10px;"
                            ng-show="ViewPart.displaySections.Statistics"
                            ng-Click="ViewPart.displaySections.Statistics = false">
                        </i> 
                        <span class="divider">|</span>
                        <span class="T2">B {!$Label.Page_Section_Statistics}</span>
                        </span>
                          <!-- <span class="ActionIcons pull-left ">
                               <div class="dropdown selectDropdown checkboxDropdown">
                                  <button class="btn dropdown-toggle" type="button" data-toggle="dropdown">{!$Label.Label_Actions}
                                  <span class="caret"></span></button>
                            </div>
                        </span>  -->
                    </div>
                </div>
                <div class="col-lg-6 col-md-6" ng-show="ViewPart.activeSidepanelink =='#RelatedSection'">
                    <div class="fixedHeaderText">
                        <span class="headerlabel">
                        <i class="fa fa-angle-right" style="width:10px; padding: 0 3px;"
                            ng-show="!ViewPart.displaySections.Related"
                            ng-Click="ViewPart.displaySections.Related = true">
                        </i> 
                        <i class="fa fa-angle-down" style="width:10px;"
                            ng-show="ViewPart.displaySections.Related"
                            ng-Click="ViewPart.displaySections.Related = false">
                        </i> 
                        <span class="divider">|</span>
                        <span class="T2">C {!$Label.Page_Section_Related}</span>
                        </span>
                          <!-- <span class="ActionIcons pull-left ">
                               <div class="dropdown selectDropdown checkboxDropdown">
                                  <button class="btn dropdown-toggle" type="button" data-toggle="dropdown">{!$Label.Label_Actions}
                                  <span class="caret"></span></button>
                            </div>
                        </span>  -->
                    </div>
                </div>
                <div class="col-lg-6 col-md-6" ng-show="ViewPart.activeSidepanelink =='#CostTrackingSection'">
                    <div class="fixedHeaderText">
                        <span class="headerlabel costTrackingDropdown">
                        <i class="fa fa-angle-right" style="width:10px; padding: 0 3px;"
                            ng-show="!ViewPart.displaySections.CostTracking"
                            ng-Click="ViewPart.displaySections.CostTracking = true">
                        </i> 
                        <i class="fa fa-angle-down" style="width:10px;"
                            ng-show="ViewPart.displaySections.CostTracking"
                            ng-Click="ViewPart.displaySections.CostTracking = false">
                        </i> 
                        <span class="divider">|</span>
                        <span class="T2">D {!$Label.Page_Section_Cost_Tracking}</span>
                        <span class="ActionIcons pull-left ">
                               <div class="dropdown selectDropdown checkboxDropdown" id="costtrackingdiv">
                                  <button class="btn dropdown-toggle" type="button" data-toggle="dropdown">{!$Label.Label_Actions}
                                  <span class="caret"></span></button>
                                  <ul class="dropdown-menu">
                                    <li ng-click = "ViewPart.showHideRecords()">
                                        <a ng-if = "!ViewPart.toggle">{!$Label.Label_Show_History}</a><a ng-if = "ViewPart.toggle">{!$Label.Label_Hide_History}</a>
                                    </li>
                                    <li ng-click = "ViewPart.adjustStock()" ng-if = "ViewPart.PartInfo.OversoldQty == 0"><a>{!$Label.Adjust_In_Stock}</a></li>
                                    <li class = "modifyCostSummary" ng-if = "ViewPart.PartInfo.OversoldQty == 0" ng-click="!ViewPart.disableModifyCostSummary && ViewPart.openModifyCostSummaryPopup()"  ng-class="{'disabledModifyCostSummary' : ViewPart.disableModifyCostSummary}"> <a>{!$Label.Modify_Cost_Summary}</a></li>
                                    <li ng-click="ViewPart.openModifyCostSourcePopup()"  ng-if = "ViewPart.PartInfo.OversoldQty == 0" ng-class="{'mutedgray' : modifyCostSoourceeditMode}"><a>{!$Label.Modify_Cost_Source}</a></li>
                                    <li ng-click = "ViewPart.ShowMessage()" ng-if = "ViewPart.PartInfo.OversoldQty != 0"><a>{!$Label.Adjust_In_Stock}</a></li>
                                    <li class = "modifyCostSummary"  ng-if = "ViewPart.PartInfo.OversoldQty != 0" ng-click="ViewPart.ShowMessage()"  ng-class="{'disabledModifyCostSummary' : ViewPart.disableModifyCostSummary}"> <a>{!$Label.Modify_Cost_Summary}</a></li>
                                    <li ng-click="ViewPart.ShowMessage()"  ng-if = "ViewPart.PartInfo.OversoldQty != 0" ng-class="{'mutedgray' : modifyCostSoourceeditMode}"><a>{!$Label.Modify_Cost_Source}</a></li>
                                    <li ng-click="ViewPart.openResolveOversoldPopup()"><a>{!$Label.Resolve_Oversold}</a></li>
                                </ul>
                            </div>
                        </span> 
                        </span>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6 fixedContent">
                <div class="fa-icons">
                    <i class="fa fa-refresh fa-2x fa-fw"
                                    ng-class="{'fa-spin' : ViewPart.isrefresh}"
                                    ng-click="ViewPart.refreshViewPart();"></i></div>
                    <button type="button" class="flatBtn text-uppercase" ng-click="ViewPart.editPart()">{!$Label.Edit_Label}</button>
                    <div class="fa-icons pull-right">
                        <i class="fa fa-floppy-o"></i>
                        <i class="fa fa-cog"></i>
                    </div>
                    <div class="col-lg-7 col-md-6 searchToAdd pull-right viewVendorSearchBox">
                        <div class="input-group">
                            <div class="input-group-btn">
                                <button type="button" class="btn C5 LabelBtn">
                                <span class="T5" style="color: #939CA9;">TO:</span>
                                <span style="color: #FFFFFF;">{{ViewPart.selectedItem}}</span>
                                </button>
                                <button type="button" class="btn C5 dropdown-toggle caretBtn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <span class="caret"></span>
                                <span class="sr-only">{!$Label.Label_Toggle_Dropdown}</span>
                                </button>
                                <ul class="dropdown-menu">
                                    <li><a href="#InfoSection" ng-click="ViewPart.dropDownItem($event, 'Info')">{!$Label.Page_Section_Info}</a></li>
                                    <li><a href="#StatisticsSection" ng-click="ViewPart.dropDownItem($event, 'Statistics')">{!$Label.Page_Section_Statistics}</a></li>
                                    <li><a href="#RelatedSection" ng-click="ViewPart.dropDownItem($event, 'Related')">{!$Label.Page_Section_Related}</a></li>
                                    <li><a href="#CostTrackingSection" ng-click="ViewPart.dropDownItem($event, 'Cost Tracking')">{!$Label.Page_Section_Cost_Tracking}</a></li>
                                    <li role="separator" class="divider"></li>
                                    <li><a href="#" class="text-uppercase">{!$Label.Label_Advanced} {!$Label.Label_Search}</a></li>

                                </ul>
                            </div>
                            <!-- /btn-group -->
                            <div class="inner-addon right-addon">
                                <i class="fa fa-search fa-flip-horizontal"></i>
                                <c:SearchToAdd />
                                <!-- <input class="header-search form-control"  placeholder="search to Add Related" type="text" /> -->
                            </div>
                        </div>
                        <!-- /input-group -->
                    </div>
                </div>
            </div>
            <div id="InfoSection" >
                <div class="main_section row" ng-show="ViewPart.displaySections.Info">
                    <div id="Info_General">
                        <p class="actionRow T2">
                            <span class="sectionText">{!$Label.Page_Section_General}</span>
                            <!-- <span class="actionText">{!$Label.Label_Actions}</span> -->
                            <span class="ActionIcons">
                            <i class="fa fa-question-circle" data-toggle="tooltip" title="{{ViewPart.helpText['General']}}"></i>
                            </span> 
                        </p>
                        <div class="row rowGeneral" >
                            <div class="col-md-4 col-lg-4 subsectionGeneral_rightonly">
                            <!-- <div class="row">
                                <div class="col-md-5 col-lg-5 " >
                                    <div  class="row ">
                                        <div class="col-md-12 col-lg-12  Profile_pic">
                                            <img src="{!URLFOR($Resource.Images, 'profile_default.jpg')}" style="height:120px;width:100%"/>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-7 col-lg-7" >
                                </div>
                            </div> -->
                            <div class="row" >
                                <div class="col-md-8 col-lg-8 " >
                                    <div  class="row ">
                                        <div class="col-md-12 col-lg-12">
                                            <span class="T1">
                                                {{ViewPart.PartInfo.PartDetailRec.Description}}
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 col-lg-4 " >
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12 col-lg-12">
                                    <span>
                                        <label class="T7" for="labelFirstName">{!$label.Vendor_Object_Display_Label} : </label>
                                    </span>
                                    <span class="T7 ng-binding">
                                        {{ViewPart.PartInfo.PartDetailRec.VendorName}}
                                    </span>
                                </div>
                            </div>
                            <div class="row" >
                                <div class="col-md-5 col-lg-5 " >
                                    <div  class="row ">
                                        <div class="col-md-12 col-lg-12">
                                            <span class="T7">
                                                {{ViewPart.PartInfo.PartDetailRec.PartNumber}}
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-7 col-lg-7 " >
                                </div>
                            </div>
                            <div class="row" >
                                <div class="col-md-5 col-lg-5 " >
                                    <div  class="row ">
                                        <div class="col-md-12 col-lg-12 Active_Button_row ">
                                            <button class="form-control C10 T4 Active_Button round_btn text-uppercase" ng-if="ViewPart.PartInfo.PartDetailRec.Active == true">{!$label.Label_Active}</button> 
                                            <button class="form-control C9 T4 Active_Button round_btn text-uppercase" ng-if="ViewPart.PartInfo.PartDetailRec.Active ==false" >{!$label.Label_Deactive}</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-7 col-lg-7 " >
                                </div>
                            </div>
                                <div class="general_info_part">
                                <div class="row">
                                    <div class="col-lg-5 col-md-5  part_general_column">
                                        <span>    
                                        <label class="T7 " for="labelFirstName">{!$ObjectType.Part__c.fields.MSRP__c.Label}</label>
                                        </span>
                                    </div>
                                    <div  class="col-lg-7 col-md-7 " >
                                        <span class="blue T3"> {{ViewPart.PartInfo.PartDetailRec.MSRP | currency}} </span>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-5 col-md-5 part_general_column"> 
                                        <span>    
                                        <label class="T7 " for="labelFirstName">{!$ObjectType.Part__c.fields.Retail_Price__c.Label}</label>
                                        </span>
                                    </div>
                                    <div  class="col-lg-7 col-md-7" >
                                        <span class=" T3" > {{ViewPart.PartInfo.PartDetailRec.Retail | currency}} </span>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-5 col-md-5 part_general_column">
                                        <span>    
                                        <label class="T7 " for="labelFirstName">{!$ObjectType.Part__c.fields.Enviro_Fee__c.Label}</label>
                                        </span>
                                    </div>
                                    <div  class="col-lg-7 col-md-7" >
                                        <span class="blue T3"> {{ViewPart.PartInfo.PartDetailRec.EnviroFee | currency}} </span>
                                    </div>
                                </div>
                                <div class="row" ng-if = "ViewPart.PartInfo.PartDetailRec.PriceMethod != ''">
                                    <div class="col-lg-5 col-md-5 part_general_column">
                                        <span>
                                            <label class="T7 " for="labelFirstName">{!$Label.Part_Object_Pricing_Method}</label>
                                        </span>
                                    </div>
                                    <div  class="col-lg-7 col-md-7" >
                                        <span class="blue T3"  >{{ViewPart.PartInfo.PartDetailRec.PriceMethod}} </span>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-5 col-md-5 part_general_column"> 
                                        <span>    
                                        <label class="T7 " for="labelFirstName">{!$ObjectType.Part__c.fields.Taxable__c.Label}</label>
                                        </span>
                                    </div>
                                    <div  class="col-lg-7 col-md-7" >
                                        <span class=" T3" ng-if="ViewPart.PartInfo.PartDetailRec.IsTaxable"> {!$Label.Label_Yes} </span>
                                        <span class=" T3" ng-if="!ViewPart.PartInfo.PartDetailRec.IsTaxable"> {!$Label.Label_No} </span>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-5 col-md-5 part_general_column">
                                        <span>    
                                        <label class="T7" for="labelFirstName">{!$ObjectType.Part__c.fields.Category__c.Label}</label>
                                        </span>
                                    </div>
                                    <div  class="col-lg-7 col-md-7" >
                                        <span class="blue T3"><a href="{!$Page.BlackPurlHome}?pageName=CategoryMgmt" target = "_blank"> {{ViewPart.PartInfo.PartDetailRec.CategoryName}} </a></span>
                                    </div>
                                </div>
                                <!-- <div class="row">
                                    <div class="col-lg-5 col-md-5 part_general_column">
                                        <span>
                                            <label class="T7 " for="labelFirstName">{!$ObjectType.Part__c.fields.Superseded_By__c.Label}</label>
                                        </span>
                                    </div>
                                    <div  class="col-lg-7 col-md-7" >
                                        <span class="blue T3"><a ng-mouseover="ViewPart.openpartpopup($event, ViewPart.PartInfo.PartDetailRec.ReplacedById);" ng-mouseleave="ViewPart.hidePartPopUp();">{{ViewPart.PartInfo.PartDetailRec.ReplacedByName}} </a></span>
                                    </div>

                                </div> -->

                                <div class="row">
                                    <div class="col-lg-5 col-md-5 part_general_column">
                                        <span>
                                            <label class="T7 " for="labelFirstName">{!$ObjectType.Part__c.fields.Location__c.Label}s</label>
                                        </span>
                                    </div>
                                    <div  class="col-lg-7 col-md-7" >
                                        <div ng-repeat="location in ViewPart.getLocations()"> 
                                             <i class="fa fa-caret-up"></i> <span class=" T3" style="margin-left: 5px;">{{location}} </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">

                                    <div class="col-lg-5 col-md-5 part_general_column">
                                        <span>
                                            <label class="T7" for="labelFirstName">Description</label>
                                            

                                        </span>
                                    </div>
                                     <div  class="col-lg-7 col-md-7" >
                                        <span class="blue T3">{{ViewPart.PartInfo.PartDetailRec.Description}}</span>
                                    </div>
                                </div>
								<div class="row" ng-if="ViewPart.PartInfo.PartDetailRec.IsTaxable">
                                    <div class="col-lg-5 col-md-5 part_general_column">
                                        <span>
                                            <label class="T7" for="labelFirstName">Applicable Tax</label>
                                            <!-- class="T7 label_favorite" -->
                                        </span>
                                    </div>
                                     <div  class="col-lg-7 col-md-7" >
                                        <span class="blue T3">{{ViewPart.PartInfo.PartDetailRec.ApplicableTaxName}}</span>
                                    </div>
                                </div>
                            </div>
                            </div>
                            <div class="col-md-4 col-lg-4 subsectionGeneral">
                                <div  class="row ">
                                    <div class="col-md-8 col-lg-8 " >
                                        <!-- <div  class="row ">
                                            <div class="col-md-12 col-lg-12  Profile_pic">
                                                <img src="{!$Resource.part_image}" style="height:150px;width:100%"/>
                                            </div>
                                        </div> -->
                                    </div>
                                    <div class="col-md-4 col-lg-4" >
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 col-lg-4 subsectionGeneral hiddenElements">  <!-- hidden -->
                                <mb-datepicker element-id='date1'
                                    input-class="testClass"
                                    input-name="testName"
                                    arrows="arrows"
                                    calendar-header="header"
                                    date="date"
                                    date-format="YYYY-MM-DD" ></mb-datepicker>
                            </div>
                        </div>
                    </div>
                    
                      
                    <div class = "viewPartStocking" id="Info_Stocking">
                            <p class="actionRow T2">
                                <span class="sectionText">{!$Label.Page_Section_Stocking}</span>
                                <!-- <span class="actionText">{!$Label.Label_Actions}</span> -->
                                <span class="ActionIcons">
                                <i class="fa fa-question-circle" data-toggle="tooltip" title="{{ViewPart.helpText['Stocking']}}"></i>
                                </span> 
                            </p>
                            <div class="row rowStocking" > 
                                <div class="stockButtons col-lg-12 col-md-12">
                                    <div class="row">
                                        <div class=" col-lg-2 col-md-2 " style="padding-left:10px ;text-align:center;cursor:pointer">
                                            <div class="T4 round_btn text-uppercase" ng-class="{ C11: ViewPart.activeButton=='CurrentStock' ,  C5: ViewPart.activeButton=='Ordering'}" ng-click="ViewPart.changeActiveButton('CurrentStock')"> {!$label.Label_Current_Stock} </div>
                                        </div>
                                       
                                        <div class=" col-lg-2 col-md-2 " style="padding-left:10px;text-align:center;cursor:pointer">
                                            <div class="T4 round_btn text-uppercase" ng-class="{ C5: ViewPart.activeButton=='CurrentStock' ,  C11: ViewPart.activeButton=='Ordering'}" ng-click="ViewPart.changeActiveButton('Ordering')"> {!$label.Label_Ordering} </div>
                                        </div>
                                        <div class="col-lg-8 col-md-8"></div>
                                    </div>
                                </div>
                                <div class="viewPatPopupOnPage1">
                                    <c:NewViewPartInformationNew />
                                </div>
                                <div class="main_section_vp row" id="GeneralSection_Stocking_Block" style="margin-left: -20px; margin-right: -20px;">
                                <div class="gid_container T6" id="View_Part_Active_Orders_Empty_Div" 
                                    ng-show="ViewPart.PartInfo.PartDetailRec.length == 0" style="padding-left: 44px;">
                                    {!$Label.Label_No_Records_Found}
                                </div>
                                <div ng-show="ViewPart.PartInfo.PartDetailRec.length != 0">
                                    <div class="gid_container_Customer" id="Customer_Owned_Units">
                                        <table class="table" id="CM_Owned_UnitsGrid">
                                            <col width="1%" />
                                            <col width="19%" />
                                            <col width="16%" />
                                            <col width="15%" />
                                            <col width="15%" />
                                            <col width="15%" />
                                            <col width="16%" />
                                            <col width="3%"  />
                                            <tr class="tableHeader T3 C2">
                                                <th></th>
                                                <th class="text-center">{!$Label.Order_In_Lots_Of}</th>
                                                <th class="text-center">{!$ObjectType.Part__c.fields.Package_Qty__c.Label}</th>
                                                <th class="text-center">{!$Label.Label_Unit}</th>
                                                <th class="text-center">{!$Label.Label_Cost}({!$Label.Label_Item})</th>
                                                <th class="text-center">{!$Label.Label_Cost}({!$Label.Label_Package})</th>
                                                <th class="text-center">{!$Label.Profitability_Label}</th>
                                                <th></th>
                                            </tr>
                                            <tbody>
                                                <!-- ng-repeat="activeOrder in ViewPartRelatedListModal.PartRelatedInfo.ActiveOrders"  -->
                                                <!-- Display rows -->
                                                <tr class="clickable_row" id="row1"
                                                    rel="owned_unit_row{{$index}}_edit" ng-click="" ng-blur=""
                                                    ng-class-even="'C2'">
                                                    <td style="background: #fff"></td>
    
                                                    <!-- <td id="VP_Active_Orders_block_grid_container_tbody_tr_td_1_{{$index}}" class="T7">  * </td> -->
                                                    <td
                                                        id="VP_Active_Orders_block_grid_container_tbody_tr_td_2_{{$index}}"
                                                        class="T7 text-center">{{ViewPart.PartInfo.PartDetailRec.OrderLots}}
                                                    </td>
                                                    <td
                                                        id="VP_Active_Orders_block_grid_container_tbody_tr_td_3_{{$index}}"
                                                        class="T7 text-center">
                                                        {{ViewPart.PartInfo.PartDetailRec.PackagedQty}}</td>
                                                    <td
                                                        id="VP_Active_Orders_block_grid_container_tbody_tr_td_4_{{$index}}"
                                                        class="T7 text-center">
                                                        {{ViewPart.PartInfo.PartDetailRec.PackagedUnit}}</td>
                                                    <td
                                                        id="VP_Active_Orders_block_grid_container_tbody_tr_td_4_{{$index}}"
                                                        class="T7 text-center">{{ViewPart.PartInfo.PartDetailRec.Cost |
                                                        currency}}</td>
                                                    <td
                                                        id="VP_Active_Orders_block_grid_container_tbody_tr_td_4_{{$index}}"
                                                        class="T7 text-center">
                                                        {{ViewPart.PartInfo.PartDetailRec.PackagedCost | currency}}
                                                    </td>
                                                    <td
                                                        id="VP_Active_Orders_block_grid_container_tbody_tr_td_5_{{$index}}"
                                                        class="T7 text-center">
                                                                    <span style="margin-top: 1%;" ng-class="{'green' : ViewPart.PartInfo.PartDetailRec.Retail - ViewPart.PartInfo.PartDetailRec.Cost >= 0, 'red' : ViewPart.PartInfo.PartDetailRec.Retail - ViewPart.PartInfo.PartDetailRec.Cost < 0}">
                                                                        <i class="fa fa-arrow-up" ng-if="ViewPart.PartInfo.PartDetailRec.Retail - ViewPart.PartInfo.PartDetailRec.Cost >= 0"> </i>
                                                                        <i class="fa fa-arrow-down" ng-if="ViewPart.PartInfo.PartDetailRec.Retail - ViewPart.PartInfo.PartDetailRec.Cost < 0"> </i>
                                                                    </span>
                                                                    <span style="margin-left: 2%;" ng-class="{'green' : ViewPart.PartInfo.PartDetailRec.Retail - ViewPart.PartInfo.PartDetailRec.Cost >= 0, 'red' : ViewPart.PartInfo.PartDetailRec.Retail - ViewPart.PartInfo.PartDetailRec.Cost < 0}">
                                                                        {!$Label.Currency_Symbol}{{ViewPart.PartInfo.PartDetailRec.Retail - ViewPart.PartInfo.PartDetailRec.Cost | number : 2}}
                                                                    </span>
                                                                    <span ng-class="{'green' : ViewPart.PartInfo.PartDetailRec.Retail - ViewPart.PartInfo.PartDetailRec.Cost >= 0, 'red' : ViewPart.PartInfo.PartDetailRec.Retail - ViewPart.PartInfo.PartDetailRec.Cost < 0}">
                                                                        ({{(ViewPart.PartInfo.PartDetailRec.Retail - ViewPart.PartInfo.PartDetailRec.Cost) * (100) / ViewPart.PartInfo.PartDetailRec.Cost | number : 2}}%)
                                                                    </span> 
                                                    </td>
                                                </tr>
    
                                            </tbody>
                                        </table>
                                    </div>

                                <!-- Pagination container -->
                                <!-- <div class="row pagination_container" id="View_Part_Active_Orders_Pagination" style="margin-left: 10px; margin-right: 0;"
                                ng-if="ViewPartRelatedListModal.PartRelatedInfo.TotalActiveOrders != undefined" >
                                    <list-pagination id-value = "View_Part_Active_Orders_Pagination_" 
                                                total-records-length = "ViewPartRelatedListModal.PartRelatedInfo.TotalActiveOrders"
                                                page-size = "ViewPartRelatedListModal.ActiveOrders_sectionModel.activeOrdersPageSize"
                                                current-page = "ViewPartRelatedListModal.ActiveOrders_sectionModel.activeOrdersCurrentPage"
                                                changes-count = "ViewPartRelatedListModal.ActiveOrders_sectionModel.activeOrdersChangesCount"
                                                pagination-control-method = "ViewPartRelatedListModal.Active_Orders_paginationControlsAction" />
                                </div> -->
                       
                            </div>
                        </div>
                            </div>
 
                     </div>
                </div>
            </div>
            <div class="sectionHeader row">
                <div class="col-lg-6 col-md-6">
                    <div class="fixedHeaderText">
                        <span class="headerlabel">
                        <i class="fa fa-angle-right" style="width:10px; padding: 0 3px;"
                            ng-show="!ViewPart.displaySections.Statistics"
                            ng-Click="ViewPart.displaySections.Statistics = true">
                        </i> 
                        <i class="fa fa-angle-down" style="width:10px;"
                            ng-show="ViewPart.displaySections.Statistics"
                            ng-Click="ViewPart.displaySections.Statistics = false">
                        </i> 
                        <span class="divider">|</span>
                        <span class="T2">B {!$Label.Page_Section_Statistics}</span>
                        </span>
                          <!-- <span class="ActionIcons pull-left ">
                               <div class="dropdown selectDropdown checkboxDropdown">
                                  <button class="btn dropdown-toggle" type="button" data-toggle="dropdown">{!$Label.Label_Actions}
                                  <span class="caret"></span></button>
                            </div>
                        </span>  -->
                    </div>
                </div>
            </div>
            <div id="StatisticsSection" >
                <div class="main_section row" ng-show="ViewPart.displaySections.Statistics">
                    <div id="Vital_Statistics" class="Vital_Statistics">
                        <p class="actionRow T2">
                            <span class="sectionText">{!$Label.Page_Section_VitalStatistics}</span> 

                            <!-- <span class="actionText">{!$Label.Label_Actions}</span> -->
                            <span class="ActionIcons">
                            <i class="fa fa-question-circle" data-toggle="tooltip" title="{{ViewPart.helpText['VitalStatistics']}}"></i>
                            </span> 
                        </p>
                        <div class="row statistics_row">
                                    <!-- <div style="height:84px ; float :left ; margin-left: 1%;" class="C7" >
                                            <div>
                                                <div class="T4" style="width: 100%" >{!$Label.Count_Confidence}</div>
                                                <div class="T13"  style="width: 100%">85%</div>
                                                <div class="T13"  style="width: 100%" ng-show="ViewPart.CustomerInfo.OrdersLifetime == null" >0</div>
                                            </div> 
                                    </div> -->
                                    <div  style="  height:84px ; float :left ; margin-left: 1%;" class="C7" >
                                            <div>
                                                <div class="T4"  style="width: 100%">{!$Label.Sold_Lifetime}</div>
                                                <div class="T13"  style="width: 100%">{{ViewPart.PartInfo.SoldLifeTime | number : 0}}</div>
                                                <!-- <div class="T13"  style="width: 100%" ng-show="ViewPart.CustomerInfo.OpenOrders == null"> 0</div> -->
                                            </div> 
                                    </div>
                                    <div  style="  height:84px ; float :left ; margin-left: 1%;" class="C7" >
                                            <div>
                                                <div class="T4" style="width: 100%"  >{!$Label.Revenue_Lifetime}</div>
                                                <div class="T13"  style="width: 100%"> {{ViewPart.PartInfo.RevenueLifeTime | currency}}</div>
                                                <!-- <div class="T13"  style="width: 100%" ng-show="ViewPart.CustomerInfo.AverageSpendPerHour == null" > $0</div> -->
                                            </div> 
                                    </div> 
                                    <div  style="  height:84px ; float :left ; margin-left: 1%;" class="C7" >
                                            <div>
                                                <div>
                                                    <div class="T4" style="width: 100%" >{!$Label.Special_Order}</div>
                                                    <div class="T13" style="width: 100%">35%</div>
                                                   <!--  <div class="T13" style="width: 100%"  ng-show="ViewPart.CustomerInfo.LastVisit == ''"  > 0</div> -->
                                                </div>  
                                            </div>  
                                    </div>
                                    <div  style="  height:84px ; float :left ; margin-left: 1%;" class="C7" >
                                            <div>
                                                <div class="T4" style="width: 100%" >{!$Label.Last_Sold}</div>
                                                <div class="T13" style="width: 100%" >{{ViewPart.PartInfo.LastSold}}</div>
                                            </div> 
                                    </div>
                                    <div  style="  height:84px ; float :left ; margin-left: 1%;" class="C7" >
                                            <div>
                                                <div class="T4"  style="width: 100%" >{!$Label.Last_Ordered}</div>
                                                <div class="T13"  style="width: 100%" >1m 4d</div>
                                            </div> 
                                    </div>
                        </div>
                    </div>
                    
                    <div id="Telemetry_Statistics">
                        <div class="telemetry_Main hiddenElements">   <!-- hidden -->
                            <p class="actionRow T2 ">
                                <span class="sectionText">{!$Label.Page_Section_Telemetry}</span>
                                <span class="actionText">{!$Label.Label_Actions}</span>
                                <span class="ActionIcons">
                                <i class="fa fa-question-circle" data-toggle="tooltip" title="{{ViewPart.helpText['Telemetry']}}"></i>
                                </span> 
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="sectionHeader row">
                <div class="col-lg-6 col-md-6">
                    <div class="fixedHeaderText">
                        <span class="headerlabel">
                        <i class="fa fa-angle-right" style="width:10px; padding: 0 3px;"
                            ng-show="!ViewPart.displaySections.Related"
                            ng-Click="ViewPart.displaySections.Related = true">
                        </i> 
                        <i class="fa fa-angle-down" style="width:10px;"
                            ng-show="ViewPart.displaySections.Related"
                            ng-Click="ViewPart.displaySections.Related = false">
                        </i> 
                        <span class="divider">|</span>
                        <span class="T2">C {!$Label.Page_Section_Related}</span>
                        </span>
                          <!-- <span class="ActionIcons pull-left ">
                               <div class="dropdown selectDropdown checkboxDropdown">
                                  <button class="btn dropdown-toggle" type="button" data-toggle="dropdown">{!$Label.Label_Actions}
                                  <span class="caret"></span></button>
                            </div>
                        </span>  -->
                    </div>
                </div>
            </div>
            
            <c:NewViewPartRelatedList />
            
            <div class="sectionHeader row">
                <div class=" col-lg-6 col-md-6">
                    <div class="fixedHeaderText">
                        <span class="headerlabel">
                        <i class="fa fa-angle-right" style="width:10px; padding: 0 3px;"
                            ng-show="!ViewPart.displaySections.CostTracking"
                            ng-Click="ViewPart.displaySections.CostTracking = true">
                        </i> 
                        <i class="fa fa-angle-down" style="width:10px;"
                            ng-show="ViewPart.displaySections.CostTracking"
                            ng-Click="ViewPart.displaySections.CostTracking = false">
                        </i> 
                        <span class="divider">|</span>
                        <span class="T2">D {!$Label.Page_Section_Cost_Tracking}</span>
                        </span>
                          <span class="ActionIcons pull-left ">
                               <div class="dropdown selectDropdown checkboxDropdown">
                                  <button class="btn dropdown-toggle" type="button" data-toggle="dropdown" id="costtrackingMenu">{!$Label.Label_Actions}
                                  <span class="caret"></span></button>
                                  <ul class="dropdown-menu">
                                    <li ng-click = "ViewPart.showHideRecords()">
                                        <a ng-if = "!ViewPart.toggle">{!$label.Label_Show_History}</a><a ng-if = "ViewPart.toggle">{!$label.Label_Hide_History}</a>
                                    </li>
                                    <li ng-click = "ViewPart.adjustStock()" ng-if = "ViewPart.PartInfo.OversoldQty == 0"><a>{!$Label.Adjust_In_Stock}</a></li>
                                    <li class = "modifyCostSummary" ng-if = "ViewPart.PartInfo.OversoldQty == 0" ng-click="!ViewPart.disableModifyCostSummary && ViewPart.openModifyCostSummaryPopup()"  ng-class="{'disabledModifyCostSummary' : ViewPart.disableModifyCostSummary}"> <a>{!$Label.Modify_Cost_Summary}</a></li>
                                    <li ng-click="ViewPart.openModifyCostSourcePopup()"  ng-if = "ViewPart.PartInfo.OversoldQty == 0" ng-class="{'mutedgray' : modifyCostSoourceeditMode}"><a>{!$Label.Modify_Cost_Source}</a></li>
                                    <li ng-click = "ViewPart.ShowMessage()" ng-if = "ViewPart.PartInfo.OversoldQty != 0"><a>{!$Label.Adjust_In_Stock}</a></li>
                                    <li class = "modifyCostSummary"  ng-if = "ViewPart.PartInfo.OversoldQty != 0" ng-click="ViewPart.ShowMessage()"  ng-class="{'disabledModifyCostSummary' : ViewPart.disableModifyCostSummary}"> <a>{!$Label.Modify_Cost_Summary}</a></li>
                                    <li ng-click="ViewPart.ShowMessage()"  ng-if = "ViewPart.PartInfo.OversoldQty != 0" ng-class="{'mutedgray' : modifyCostSoourceeditMode}"><a>{!$Label.Modify_Cost_Source}</a></li>
                                    <li ng-click="ViewPart.openResolveOversoldPopup()"><a>{!$Label.Resolve_Oversold}</a></li>
                                </ul>
                            </div>
                        </span> 
                    </div>
                </div>

            </div>
            <div id="CostTrackingSection" >
                <div class="main_section row" ng-show="ViewPart.displaySections.CostTracking">
                   <div id="Cost_Summary">
                        <p class="actionRow T2 ">
                            <span class="sectionText">{!$Label.Page_Section_Cost_Summary}</span>
                            <!-- <span class="actionText">{!$Label.Label_Actions}</span> -->
                            <span class="ActionIcons">
                            <i class="fa fa-question-circle" data-toggle="tooltip" title="{{ViewPart.helpText['CostSummary']}}"></i>
                            </span> 
                        </p>
                        

                        <div class="row rowGeneral" >
                            <div class="col-md-4 col-lg-4 subsectionGeneral_rightonly">
                            
                            <div class="cost_summary_part">
                                <div class="row" ng-if = "ViewPart.PartInfo.OversoldQty != 0">
                                    <div class="col-lg-5 col-md-5  part_general_column">
                                        <span class="Requiredtd">    
                                        {!$Label.Oversold_Valuation}

                                        </span>
                                    </div>
                                    <div  class="col-lg-7 col-md-7 " >
                                        <span class="RequiredtdVal "> {{ViewPart.PartInfo.OversoldValuation| currency}} </span>
                                    </div>
                                </div>
                                <div class="row" ng-if = "ViewPart.PartInfo.OversoldQty != 0">
                                    <div class="col-lg-5 col-md-5 part_general_column"> 
                                        <span class="Requiredtd">{!$Label.Oversold_Qty}
                                        </span>
                                    </div>
                                    <div  class="col-lg-7 col-md-7" >
                                        <span class=" RequiredtdVal " > {{ViewPart.PartInfo.OversoldQty}} </span>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-5 col-md-5 part_general_column">
                                        <span>    
                                        <label class="T7 " for="labelFirstName">{!$Label.Total_Valuation}</label>
                                        </span>
                                    </div>
                                    <div  class="col-lg-7 col-md-7" >
                                        <span class=" T3"> {{ViewPart.PartInfo.TotalValuation| currency}} </span>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-5 col-md-5 part_general_column">
                                        <span>
                                            <label class="T7 " for="labelFirstName">{!$Label.Qty_In_Stock}</label>
                                        </span>
                                    </div>
                                    <div  class="col-lg-7 col-md-7" >
                                        <span class=" T3"  >{{ViewPart.PartInfo.QtyInStock}} </span>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-5 col-md-5 part_general_column">
                                        <span>
                                            <label class="T7 " for="labelFirstName">{!$Label.Average_Cost} =</label>~
                                        </span>
                                    </div>
                                    <div  class="col-lg-7 col-md-7" >
                                        <span class="blue T3">{{ViewPart.PartInfo.AverageCost| currency}}</span>
                                    </div>
                                </div>
                                
                                
                                </div>
                            </div>
                        </div>
                    

                    </div>
                  
                    <div id="Cost_Details">
                        <div class="telemetry_Main">
                            <p class="actionRow T2 ">
                                <span class="sectionText">{!$Label.Page_Section_Cost_Details}</span>
                                <!-- <span class="actionText">{!$Label.Label_Actions}</span> -->
                                <span class="ActionIcons">
                                <i class="fa fa-question-circle" data-toggle="tooltip" title="{{ViewPart.helpText['CostDetails']}}"></i>
                                </span> 
                            </p>
                        

                        <div class="row rowCostDetails" > 
                                
                            

                            <div class="main_section_vp row" id="CostTrackingSection_Cost_Details_Block" style="margin-left: -20px; margin-right: -20px;">
                                <div class="gid_container T6" id="Cost_Details_Empty_Div" 
                                    ng-show="ViewPart.PartInfo.PartFIFOBucketList.length  == 0 && ViewPart.PartInfo.TotalFIFORecords > 0" style="padding-left: 36px;">
                                    Select “Show/Hide History” to see details
                                </div>
                                <div class="gid_container T6" id="Cost_Details_Empty_Div" 
                                    ng-show="ViewPart.PartInfo.PartFIFOBucketList.length  == 0 && ViewPart.PartInfo.TotalFIFORecords == 0 " style="padding-left: 36px;">
                                    No Costing Activity for this part
                                </div>
                                <div ng-show="ViewPart.PartInfo.PartFIFOBucketList.length != 0">
                                <div class="gid_container_Customer" id="View_Part_Cost_Details" >
                                    <table class="table" id="VP_Cost_DetailsGrid">
                                        <col width="1%"  />
                                        <col width="4%"  />




                                        <col width="12%" />
                                            <col width="9%"  />
                                            <col width="10%" />
                                            <col width="12%"  />
                                            <col width="9%"  />
                                            <col width="9%" />
                                            <col width="9%"  />
                                            <col width="10%" />
                                            <col width="10%"  />
                                        <col width="1%"  />
                                        <tr  class="tableHeader T3 C2">
                                            <th></th>
                                            <th></th>
                                            <!-- <th style="cursor: pointer;" ng-click="ViewPartRelatedListModal.Active_Orders_sortControlsAction($event)">
                                                <i class="fa fa-sort-asc" ng-show="ViewPartRelatedListModal.ActiveOrders_sectionModel.sorting[0].sortDirection == 'ASC'"/>
                                                <i class="fa fa-sort-desc" ng-show="ViewPartRelatedListModal.ActiveOrders_sectionModel.sorting[0].sortDirection == 'DESC'"/>
                                                <i class="fa fa-sort" ng-show="ViewPartRelatedListModal.ActiveOrders_sectionModel.sorting[0].sortDirection == ''"/>
                                                {!$Label.PO_Object_Short_Display_Label}
                                            </th> -->
                                            <th class="">{!$label.Label_Source}</th>
                                            <th class="text-center">{!$label.Label_Date}</th>
                                            <th class="">{!$label.Label_Id}#</th>
                                            <th class="">{!$label.Label_Reference}</th>
                                            <th class="text-center">{!$label.Label_Qty_In}</th>
                                            <th class="text-center">{!$label.Label_Qty_Out}</th>






                                            <th class="text-center">{!$label.Label_Remaining}</th>
                                            <th class="text-center">{!$label.Label_Cost}</th>
                                            <th class="text-center">{!$label.Label_Total}</th>


                                            <th></th>
                                        </tr>
                                        <tbody ng-repeat="FifoBucket in ViewPart.PartInfo.PartFIFOBucketList " class="parentBody" ng-init="FifoBucketHeaderIndex = $index">
                                            <!-- Display rows -->
                                            <tr class="clickable_row" id="row1" ng-class-even="'C2'" ng-click="ViewPart.updateFifoBucketLineItem( FifoBucketHeaderIndex)"  >
                                                <td style="background:#fff"></td>
                                                <td id="VP_Cost_Details_block_grid_container_tbody_tr_td_1_{{$index}}" >
                                                    <a href="" class="edite_btn" rel="row1_edit">
                                                        <i class="fa fa-list  Plr5 FC7 F18 first_icon"></i> 
                                                    </a>
                                                </td>
                                                <td id="VP_Active_Orders_block_grid_container_tbody_tr_td_2_{{$index}}" class="T7 " >{{FifoBucket.SourceName}}</td>
                                                <td id="VP_Active_Orders_block_grid_container_tbody_tr_td_3_{{$index}}" class="T7 text-center">{{FifoBucket.CreatedDate}}  </td>
                                                <td id="VP_Active_Orders_block_grid_container_tbody_tr_td_4_{{$index}}" class="T7 "><a href= "javascript:void(0)">{{FifoBucket.UniqueId}}</a>    </td>
                                                <td id="VP_Active_Orders_block_grid_container_tbody_tr_td_5_{{$index}}"  class="T7 ">{{FifoBucket.Reference}}   </td>
                                                <td id="VP_Active_Orders_block_grid_container_tbody_tr_td_6_{{$index}}" class ="T7 text-center">{{FifoBucket.QtyIn}}</td>
                                                <td id="VP_Active_Orders_block_grid_container_tbody_tr_td_7_{{$index}}" class ="T7 text-center">{{FifoBucket.QtyOut}}  </td>
                                                <td id="VP_Active_Orders_block_grid_container_tbody_tr_td_8_{{$index}}" class ="T7 text-center">{{FifoBucket.RemainingQty}}  </td>
                                                <td id="VP_Active_Orders_block_grid_container_tbody_tr_td_9_{{$index}}" class ="T7 text-center">{{FifoBucket.Cost| currency}}</td>
                                                <td id="VP_Active_Orders_block_grid_container_tbody_tr_td_10_{{$index}}" class ="T7 text-center">{{FifoBucket.Total| currency}}</td> 
                                                <td style="background:#fff"></td>
                                            </tr>
                                            <tr style="display: table-row;"  ng-show="FifoBucket.PartFIFOActivityLineItemList.length == 0 && ViewPart.PartInfo.PartFIFOBucketList[FifoBucketHeaderIndex].isEdit">
                                                    <td style="background:#fff"></td>
                                                    <td style="background:#fff"></td>
                                                    <td style="background:#fff"></td>
                                                    <td style="background:#fff"></td>
                                                    <td style="background:#fff"></td>
                                                    <td class="T7">No Activity Available</td>
                                                    <td style="background:#fff"></td>
                                                    <td style="background:#fff"></td>
                                                    <td style="background:#fff"></td>
                                                    <td style="background:#fff"></td>
                                                    <td style="background:#fff"></td>
                                                    <td style="background:#fff"></td>
                                                </tr>
                                            <tr style="display: table-row;"  ng-show="ViewPart.PartInfo.PartFIFOBucketList[FifoBucketHeaderIndex].isEdit" class="Editable_row" ng-repeat-start="FifoBucketLineItem in FifoBucket.PartFIFOActivityLineItemList" >
                                                <td style="background:#fff"></td>
                                                <td style="background:#fff"></td>
                                                <td style="background:#fff"></td>
                                                <td class ="T7 text-center">{{FifoBucketLineItem.CreatedDate}}</td>
                                                <td class ="T7"><a href = "javascript:void(0)">{{FifoBucketLineItem.UniqueId}}</a></td>
                                                <td class ="T7">{{FifoBucketLineItem.Reference}}</td>
                                                <td style="background:#fff"></td>
                                                <td class ="T7 text-center">{{FifoBucketLineItem.QtyOut}}</td>
                                                <td style="background:#fff"></td>
                                                <td style="background:#fff"></td>
                                                <td style="background:#fff"></td>
                                                <td style="background:#fff"></td>
                                            </tr>
                                            <tr ng-repeat-end="ng-repeat-end" ></tr>
                                        </tbody>
                                    </table>
                                </div>
                            
                            <!-- Pagination container -->
                           <!--  <div class="row pagination_container" id="View_Part_Active_Orders_Pagination" style="margin-left: 10px; margin-right: 0;"
                                ng-if="ViewPartRelatedListModal.PartRelatedInfo.TotalActiveOrders != undefined" >
                                <list-pagination id-value = "View_Part_Active_Orders_Pagination_" 
                                                total-records-length = "ViewPartRelatedListModal.PartRelatedInfo.TotalActiveOrders"
                                                page-size = "ViewPartRelatedListModal.ActiveOrders_sectionModel.activeOrdersPageSize"
                                                current-page = "ViewPartRelatedListModal.ActiveOrders_sectionModel.activeOrdersCurrentPage"
                                                changes-count = "ViewPartRelatedListModal.ActiveOrders_sectionModel.activeOrdersChangesCount"
                                                pagination-control-method = "ViewPartRelatedListModal.Active_Orders_paginationControlsAction" />
                            </div> -->
                        </div>
                    
                                </div>
                            </div>
 

                        </div>
                    </div>
                </div>
            </div>
            <div style="height:600px; background: #E6EBEC; margin: 0 -15px;" ></div>
        </div>
        
        </div>
    </body>
    
    </html>
</apex:page>