<apex:component >
    <!-- Component Attributes -->
    <apex:attribute name="uniqueId" required="true" type="String" description="unique Id for components here."/>
    <apex:attribute name="customer" required="true" type="Account" description="Selected customer Id."/>
    <apex:attribute name="accountFieldsMap" required="true" type="String" description="Map to hold Account field API name to related JSON field name."/>
    <apex:attribute name="contactFieldsMap" required="true" type="String" description="Map to hold Contact field API name to related JSON field name."/>
    
    <script>
        // JSON object for customer
        var {!uniqueId}customerJSONRecord;
        
        // Account fields map:
        var accountFieldsMap = {!accountFieldsMap};
        
        // Contact fields map:
        var contactFieldsMap = {!contactFieldsMap};
        
        // Selected Customer Type:
        var {!uniqueId}selectedCustomerType;
        
        // Fields map to process:
        var {!uniqueId}processingFieldsMap;
        
        // API field attribute value to access:
        var {!uniqueId}attrAPIField;
        
        // Customer Id
        var {!uniqueId}customerId = "{!JSENCODE(customer.Id)}";
        
        // Boolean to keep track if any changes made to form
        var {!uniqueId}IsFormModified = false;
        
        // Integer value for tab index
        var {!uniqueId}TabIndex = 0;
    </script>
    
    <body>
        <div id="{!uniqueId}IndividualNameDiv" style="display: none;">
            <input type="text" id="{!uniqueId}FirstName" class="k-input k-textbox" placeholder="First Name" maxlength="40" conApi="FirstName" title="First Name"/>
            &nbsp;
            <input type="text" id="{!uniqueId}LastName" class="k-input k-textbox requiredField" placeholder="Last Name" maxlength="80" conApi="LastName" title="Last Name"/>
        </div>
        
        <div id="{!uniqueId}BusinessNameDiv" style="display: none;">
            <input type="text" id="{!uniqueId}BusinessName" class="k-input k-textbox requiredField" placeholder="Business Name" maxlength="255" accApi="Name" title="Business Name"/>
        </div>
        
        <table width="100%" >
            <col width="10%" />
            <col width="40%" />
            <col width="15%" />
            <col width="35%" />
            
            <tr>
                <td colspan="2">
                    <div id="{!uniqueId}NameDiv"></div>
                </td>
                
                <td>
                    <input type="radio" id="{!uniqueId}IndividualType" name="{!uniqueId}customerType" value="Individual" accApi="Type__c">  <label for="{!uniqueId}IndividualType">Individual</label>   </input>
                </td>
                <td>
                    <div style="float: left; padding-top: 8px;">
                        <input type="radio" id="{!uniqueId}BusinessType" name="{!uniqueId}customerType" value="Business" accApi="Type__c">  <label for="{!uniqueId}BusinessType">Business</label>   </input>
                    </div>
                    <div style="float: right;">
                        <img src="{!URLFOR($Resource.Images, '/support.png')}" />&nbsp;&nbsp;
                        <img src="{!URLFOR($Resource.Images, '/settings.png')}" />&nbsp;&nbsp;
                        <img src="{!URLFOR($Resource.Images, '/phone.png')}" />
                    </div>
                    <div style="clear: both;" />
                </td>
            </tr>
        </table>
        
        <script>
            $(document).ready( function(){
                setTimeout(function(){
                    {!uniqueId}copyAddressToShipping(document.getElementById("{!uniqueId}CopyAddress"));
                }, 3000);
            });
        </script>
        
        <script>
            $("input[name={!uniqueId}customerType]:radio").change(function () {
                {!uniqueId}IsFormModified = true;
                {!uniqueId}toggleCustomerName($(this).val());
            });
            
            $("#{!uniqueId}IndividualType").attr("tabindex", {!uniqueId}TabIndex + 3);
            $("#{!uniqueId}BusinessType").attr("tabindex", {!uniqueId}TabIndex + 4);
            $("#{!uniqueId}BillingStreet").attr("tabindex", {!uniqueId}TabIndex + 5);
            $("#{!uniqueId}BillingCity").attr("tabindex", {!uniqueId}TabIndex + 6);
            $("#{!uniqueId}BillingCountry").attr("tabindex", {!uniqueId}TabIndex + 7);
            $("#{!uniqueId}BillingState").attr("tabindex", {!uniqueId}TabIndex + 8);
            $("#{!uniqueId}BillingPostalCode").attr("tabindex", {!uniqueId}TabIndex + 9);
            $("#{!uniqueId}CopyAddress").attr("tabindex", {!uniqueId}TabIndex + 10);
            
            //Shipping
            $("#{!uniqueId}ShippingStreet").attr("tabindex", {!uniqueId}TabIndex + 11);
            $("#{!uniqueId}ShippingCity").attr("tabindex", {!uniqueId}TabIndex + 12);
            $("#{!uniqueId}ShippingCountry").attr("tabindex", {!uniqueId}TabIndex + 13);
            $("#{!uniqueId}ShippingState").attr("tabindex", {!uniqueId}TabIndex + 14);
            $("#{!uniqueId}ShippingPostalCode").attr("tabindex", {!uniqueId}TabIndex + 15);
            
            $("#{!uniqueId}Phone").attr("tabindex", {!uniqueId}TabIndex + 16);
            $("#{!uniqueId}Mobile__c").attr("tabindex", {!uniqueId}TabIndex + 17);
            $("#{!uniqueId}Fax").attr("tabindex", {!uniqueId}TabIndex + 18);
            $("#{!uniqueId}Email__c").attr("tabindex", {!uniqueId}TabIndex + 19);
            $("#{!uniqueId}PreferredMethod").attr("tabindex", {!uniqueId}TabIndex + 20);
            

            $("#{!uniqueId}VIP__c").attr("tabindex", {!uniqueId}TabIndex + 21);
            $("#{!uniqueId}PriceLevel").attr("tabindex", {!uniqueId}TabIndex + 22);
            $("#{!uniqueId}SalesTax").attr("tabindex", {!uniqueId}TabIndex + 23);
            $("#{!uniqueId}Is_Vendor__c").attr("tabindex", {!uniqueId}TabIndex + 24);
            $("#{!uniqueId}Active__c").attr("tabindex", {!uniqueId}TabIndex + 25);
            $("#{!uniqueId}CustomerSaveButton").attr("tabindex", {!uniqueId}TabIndex + 26);
            
            // Method to handle drop down changes in form
            function {!uniqueId}CountryStateDropDownChangeCallBack(){
                {!uniqueId}IsFormModified = true;
            }
            
            // Method to handle drop down changes in form
            function {!uniqueId}PreferredContactonChangeDropDown(){
                {!uniqueId}IsFormModified = true;
                
                {!uniqueId}validateSelectedContactMethod();
            }
            
            // Method to handle drop down changes in form
            function {!uniqueId}PriceLevelChangeDropDown(){
                {!uniqueId}IsFormModified = true;
            }
            
            // Method to handle drop down changes in form
            function {!uniqueId}SalesTaxChangeDropDown(){
                {!uniqueId}IsFormModified = true;
            }
            
            // Method to toggle customer name fields based on cuustomer type selected
            function {!uniqueId}toggleCustomerName(customerType){
                if(customerType == null || customerType == ""){
                    customerType = "Individual";
                }
                {!uniqueId}selectedCustomerType = customerType;
                if(customerType == 'Business'){
                    $("#{!uniqueId}BusinessType").prop("checked", true);
                    $("#{!uniqueId}NameDiv").html( $("#{!uniqueId}BusinessNameDiv").html() );
                    $("#{!uniqueId}NameDiv > input[id='{!uniqueId}BusinessName']").focus();
                    
                    try{
                        var businessNameVal = $("#{!uniqueId}NameDiv > input[id='{!uniqueId}FirstName']").val().trim() + " " + $("#{!uniqueId}NameDiv > input[id='{!uniqueId}LastName']").val().trim();
                        $("#{!uniqueId}NameDiv > input[id='{!uniqueId}BusinessName']").val(businessNameVal.trim());
                    }catch(ex){}
                    
                    {!uniqueId}attrAPIField = "accAPI";
                    {!uniqueId}processingFieldsMap = accountFieldsMap;
                    {!uniqueId}bindBuisenessNameValidation();
                    
                    $("#{!uniqueId}NameDiv > #{!uniqueId}BusinessName").attr("tabindex", {!uniqueId}TabIndex + 1);
                    setTimeout(function(){$("#{!uniqueId}NameDiv > #{!uniqueId}BusinessName").focus()}, 1000);
                }else{
                    $("#{!uniqueId}IndividualType").prop("checked", true);
                    $("#{!uniqueId}NameDiv").html( $("#{!uniqueId}IndividualNameDiv").html() );
                    $("#{!uniqueId}NameDiv > input[id='{!uniqueId}FirstName']").focus();
                    
                    try{
                        var individualNameVal = $("#{!uniqueId}NameDiv > input[id='{!uniqueId}BusinessName']").val().trim();

                        var nameStrArr = individualNameVal.split(" ");
                        
                        $("#{!uniqueId}NameDiv > input[id='{!uniqueId}FirstName']").val(nameStrArr[0].trim());
                        if(nameStrArr.length > 1){
                            var lastNameStr = "";
                            for(var i = 1; i < nameStrArr.length; i++){
                                lastNameStr += nameStrArr[i] + " ";
                            }
                            $("#{!uniqueId}NameDiv > input[id='{!uniqueId}LastName']").val(lastNameStr.trim());
                        }
                    }catch(ex){}
                    
                    if({!uniqueId}customerId == '' || {!uniqueId}customerId == null){
                        {!uniqueId}attrAPIField = "conAPI";
                        {!uniqueId}processingFieldsMap = contactFieldsMap;
                    }else{
                        {!uniqueId}attrAPIField = "accAPI";
                        {!uniqueId}processingFieldsMap = accountFieldsMap;
                    }
                    {!uniqueId}bindFirstNameValidation();
                    {!uniqueId}bindLastNameValidation();
                    
                    $("#{!uniqueId}NameDiv > #{!uniqueId}FirstName").attr("tabindex", {!uniqueId}TabIndex + 1);
                    $("#{!uniqueId}NameDiv > #{!uniqueId}LastName").attr("tabindex", {!uniqueId}TabIndex + 2);
                    setTimeout(function(){$("#{!uniqueId}NameDiv > #{!uniqueId}FirstName").focus()}, 1000);
                }
            }
            
            {!uniqueId}toggleCustomerName('{!JSENCODE(customer.Type__c)}');
            
            if( {!uniqueId}customerId.length != 0 ){
                $("#{!uniqueId}BusinessType").attr('disabled',true);
                $("#{!uniqueId}IndividualType").attr('disabled',true);
            }
            
            if({!uniqueId}selectedCustomerType == "Business"){
                $("#{!uniqueId}NameDiv > input[id='{!uniqueId}BusinessName']").val('{!JSENCODE(customer.Name)}');
            }else{
                var customerName = '{!JSENCODE(customer.Name)}';
                var customerFirstName = customerName.split(" ")[0];
                $("#{!uniqueId}NameDiv > input[id='{!uniqueId}FirstName']").val(customerFirstName);
                $("#{!uniqueId}NameDiv > input[id='{!uniqueId}LastName']").val(customerName.slice(customerFirstName.length));
            }
            
            
            function {!uniqueId}bindFirstNameValidation(){
                $("#{!uniqueId}NameDiv > input[id='{!uniqueId}FirstName']").focusout(function() {
                    var fnStr = $(this).val().trim();
                    $(this).val(fnStr);
                    var validationErr = {!uniqueId}validateFirstName();
                    if(validationErr == null){
                        var lnStr = $("#{!uniqueId}NameDiv > input[id='{!uniqueId}LastName']").val().trim();
                        if(fnStr != "" && lnStr != "") {
                            $("#{!uniqueId}TabNameDiv").text(fnStr + " " + lnStr);
                            $("#{!uniqueId}TabNameDiv").attr("title", fnStr + " " + lnStr);
                        } else {
                            $("#{!uniqueId}TabNameDiv").text("New Customer");
                            $("#{!uniqueId}TabNameDiv").attr("title", "New Customer");
                        }
                    }
                });
                
                $("#{!uniqueId}NameDiv > input[id='{!uniqueId}FirstName']").change(function() {
                    {!uniqueId}IsFormModified = true;
                });
            }
            
            // Validation method for "FirstName"
            function {!uniqueId}validateFirstName(){
                var nameFieldRegEx = /^[a-zA-Z0-9']{0,40}$/;
                var fnStr = $("#{!uniqueId}NameDiv > input[id='{!uniqueId}FirstName']").val();
                
                var validationErr;
                if(nameFieldRegEx.length != 0){
                    if( nameFieldRegEx.test(fnStr) ){
                        validationErr = null;
                    }else{
                        validationErr = "Invalid";
                    }
                }
                
                $("#{!uniqueId}FirstNameErr").remove();
                if(validationErr != null){
                    $("<font>", {id: "{!uniqueId}FirstNameErr", class: "errDiv", text: validationErr, click: function () {}}).insertAfter("#{!uniqueId}NameDiv > input[id='{!uniqueId}LastName']");
                }else{
                }
                
                return validationErr;
            }
            
            function {!uniqueId}bindLastNameValidation(){
                $("#{!uniqueId}NameDiv > input[id='{!uniqueId}LastName']").focusout(function() {
                    var lnStr = $(this).val().trim();
                    $(this).val(lnStr);
                    var validationErr = {!uniqueId}validateLastName();
                    
                    if(validationErr == null){
                        var fnStr = $("#{!uniqueId}NameDiv > input[id='{!uniqueId}FirstName']").val().trim();
                        if(fnStr != "" && lnStr != "") {
                            $("#{!uniqueId}TabNameDiv").text(fnStr + " " + lnStr);
                            $("#{!uniqueId}TabNameDiv").attr("title", fnStr + " " + lnStr);
                        } else {
                            $("#{!uniqueId}TabNameDiv").text("New Customer");
                            $("#{!uniqueId}TabNameDiv").attr("title", "New Customer");
                        }
                    }
                });
                
                $("#{!uniqueId}NameDiv > input[id='{!uniqueId}LastName']").change(function() {
                    {!uniqueId}IsFormModified = true;
                });
            }
            
            // Validation method for "LastName"
            function {!uniqueId}validateLastName(){
                var nameFieldRegEx = /^[a-zA-Z 0-9']{0,80}$/;
                var lnStr = $("#{!uniqueId}NameDiv > input[id='{!uniqueId}LastName']").val();
                
                var validationErr;
                if(lnStr.length == 0){
                    validationErr = "Required";
                }else if( nameFieldRegEx.test(lnStr) ){
                    validationErr = null;
                }else{
                    validationErr = "Invalid";
                }
                
                $("#{!uniqueId}LastNameErr").remove();
                if(validationErr != null){
                    $("<font>", {id: "{!uniqueId}LastNameErr", class: "errDiv", text: validationErr, click: function () {}}).insertAfter("#{!uniqueId}NameDiv > input[id='{!uniqueId}LastName']");
                }else{
                }
                
                return validationErr;
            }
            
            function {!uniqueId}bindBuisenessNameValidation(){
                $("#{!uniqueId}NameDiv > input[id='{!uniqueId}BusinessName']").focusout(function() {
                    try{
                        var businessStr = $(this).val().trim();
                        $(this).val(businessStr);
                        var validationErr = {!uniqueId}validateBusinessName();
                        
                        if(validationErr == null){
                            $("#{!uniqueId}TabNameDiv").text(businessStr);
                            $("#{!uniqueId}TabNameDiv").attr("title", businessStr);
                        } else {
                            $("#{!uniqueId}TabNameDiv").text("New Customer");
                            $("#{!uniqueId}TabNameDiv").attr("title", "New Customer");
                        }
                    }catch(ex){}
                });
                
                $("#{!uniqueId}NameDiv > input[id='{!uniqueId}BusinessName']").change(function() {
                    {!uniqueId}IsFormModified = true;
                });
            }
            
            // Validation method for "BusinessName"
            function {!uniqueId}validateBusinessName(){
                //var nameFieldRegEx = /^[a-zA-Z ]{2,80}$/;
                var businessStr = $("#{!uniqueId}NameDiv > input[id='{!uniqueId}BusinessName']").val();
                
                var validationErr;
                try{
                    if(businessStr.length == 0){
                        validationErr = "Required";
                    }
                }catch(ex){}
                
                $("#{!uniqueId}BusinessNameErr").remove();
                if(validationErr != null){
                    $("<font>", {id: "{!uniqueId}BusinessNameErr", class: "errDiv", text: validationErr, click: function () {}}).insertAfter("#{!uniqueId}NameDiv > input[id='{!uniqueId}BusinessName']");
                }else{
                }
                
                return validationErr;
            }
        </script>
        
        <br/><br/>
        <table width="100%" >
            <col width="10%" />
            <col width="40%" />
            <col width="15%" />
            <col width="35%" />
            
            <tr>
                <td colspan="2">
                    <B>Billing Address</B>
                </td>
                <td colspan="2">
                    <B>Contact Information</B>
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <input type="text" id="{!uniqueId}BillingStreet" class="k-input k-textbox"  maxlength="255"
                            placeholder="Street" accApi="BillingStreet" conApi="MailingStreet" title="Street"/>
                    <script>
                        $("#{!uniqueId}BillingStreet").val('{!JSENCODE(customer.BillingStreet)}');
                        $("#{!uniqueId}BillingStreet").change(function() {
                            {!uniqueId}IsFormModified = true;
                        });
                    </script>
                </td>
                
                <td colspan="2">
                    <input type="text" id="{!uniqueId}Phone" class="k-input requiredField" 
                            placeholder="Phone" accApi="Phone" conApi="Phone" title="Phone"/>
                    <script>
                        $("#{!uniqueId}Phone").kendoMaskedTextBox({
                            mask: "999-000-0000"
                        });
                        $("#{!uniqueId}Phone").val('{!JSENCODE(customer.Phone)}');
                        $("#{!uniqueId}Phone").focusout(function() {
                            var phoneStr = $(this).val().trim();
                            $(this).val(phoneStr);
                            var validationErr = {!uniqueId}validatePhone();
                        });
                        $("#{!uniqueId}Phone").change(function() {
                            {!uniqueId}IsFormModified = true;
                        });
                        
                        // Validation method for "Phone"
                        function {!uniqueId}validatePhone(){
                            //var phoneRegEx = /^([0-9\(\)\/\+ \-]*)$/;
                            var phoneStr = $("#{!uniqueId}Phone").val().trim();
                            
                            var validationErr;
                            if(phoneStr.length == 0){
                                validationErr = "Required";
                            }else if(phoneStr.length != 12){
                                validationErr = "Invalid";
                            }
                            
                            $("#{!uniqueId}PhoneErr").remove();
                            if(validationErr != null){
                                $("<font>", {id: "{!uniqueId}PhoneErr", class: "errDiv", text: validationErr, click: function () {}}).insertAfter("#{!uniqueId}Phone");
                            }else{
                            }
                            
                            return validationErr;
                        }
                    </script>
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <input type="text" id="{!uniqueId}BillingCity" class="k-input k-textbox" 
                            placeholder="City" accApi="BillingCity" conApi="MailingCity" title="City"/>
                    <script>
                        $("#{!uniqueId}BillingCity").val('{!JSENCODE(customer.BillingCity)}');
                        $("#{!uniqueId}BillingCity").focusout(function() {
                            var cityStr = $(this).val().trim();
                            $(this).val(cityStr);
                            var validationErr = {!uniqueId}validateBillingCity();
                        });
                        
                        $("#{!uniqueId}BillingCity").change(function() {
                            {!uniqueId}IsFormModified = true;
                        });
                        
                        // Validation method for "BillingCity"
                        function {!uniqueId}validateBillingCity(){
                            var billingCityRegEx = /^[a-zA-Z ]{0,80}$/;
                            var billingCityStr = $("#{!uniqueId}BillingCity").val().trim();
                            
                            var validationErr;
                            if( !billingCityRegEx.test(billingCityStr) ){
                                validationErr = "Invalid";
                            }
                            
                            $("#{!uniqueId}BillingCityErr").remove();
                            if(validationErr != null){
                                $("<font>", {id: "{!uniqueId}BillingCityErr", class: "errDiv", text: validationErr, click: function () {}}).insertAfter("#{!uniqueId}BillingCity");
                            }else{
                            }
                            
                            return validationErr;
                        }
                    </script>
                </td>
                
                <td colspan="2">
                    <input type="text" id="{!uniqueId}Mobile__c" class="k-input" 
                            placeholder="Cell" accApi="Mobile__c" conApi="MobilePhone" title="Cell"/>
                    <script>
                        $("#{!uniqueId}Mobile__c").kendoMaskedTextBox({
                            mask: "999-000-0000"
                        });
                        $("#{!uniqueId}Mobile__c").val('{!JSENCODE(customer.Mobile__c)}');
                        $("#{!uniqueId}Mobile__c").focusout(function() {
                            var mobStr = $(this).val().trim();
                            $(this).val(mobStr);
                            var validationErr = {!uniqueId}validateMobile();
                        });
                        
                        $("#{!uniqueId}Mobile__c").change(function() {
                            {!uniqueId}IsFormModified = true;
                        });
                        
                        // Validation method for "Mobile"
                        function {!uniqueId}validateMobile(){
                            //var mobRegEx = /^(?:\+?88)?01[15-9]\d{8}$/;
                            var mobStr = $("#{!uniqueId}Mobile__c").val().trim();
                            
                            var validationErr;
                            if(mobStr.length != 0 && mobStr.length != 12){
                                validationErr = "Invalid";
                            }
                            
                            $("#{!uniqueId}MobErr").remove();
                            if(validationErr != null){
                                $("<font>", {id: "{!uniqueId}MobErr", class: "errDiv", text: validationErr, click: function () {}}).insertAfter("#{!uniqueId}Mobile__c");
                            }else{
                            }
                            
                            return validationErr;
                        }
                    </script>
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <input type="text" id="{!uniqueId}BillingCountry" accApi="BillingCountry" conApi="MailingCountry" title="Country" style="width: 40%;"/>
                </td>
                
                <td colspan="2">
                    <input type="text" id="{!uniqueId}Fax" class="k-input" 
                            placeholder="Fax" accApi="Fax" conApi="Fax" title="Fax"/>
                    <script>
                        $("#{!uniqueId}Fax").kendoMaskedTextBox({
                            mask: "999-000-0000"
                        });
                        $("#{!uniqueId}Fax").val('{!JSENCODE(customer.Fax)}');
                        $("#{!uniqueId}Fax").focusout(function() {
                            var faxStr = $(this).val().trim();
                            $(this).val(faxStr);
                            var validationErr = {!uniqueId}validateFax();
                        });
                        
                        $("#{!uniqueId}Fax").change(function() {
                            {!uniqueId}IsFormModified = true;
                        });
                        
                        // Validation method for "Fax"
                        function {!uniqueId}validateFax(){
                            //var faxRegEx = /((\(\d{3}\) ?)|(\d{3}-))?\d{3}-\d{4}/;
                            var faxStr = $("#{!uniqueId}Fax").val().trim();
                            
                            var validationErr;
                            if(faxStr.length != 0 && faxStr.length != 12){
                                validationErr = "Invalid";
                            }
                            
                            $("#{!uniqueId}FaxErr").remove();
                            if(validationErr != null){
                                $("<font>", {id: "{!uniqueId}FaxErr", class: "errDiv", text: validationErr, click: function () {}}).insertAfter("#{!uniqueId}Fax");
                            }else{
                            }
                            
                            return validationErr;
                        }
                    </script>
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <input type="text" id="{!uniqueId}BillingState" accApi="BillingState" conApi="MailingState" title="State" style="width: 40%;"/>
                    <c:CountryStateDropdown uniqueId="Billing" countryElemId="{!uniqueId}BillingCountry" stateElemId="{!uniqueId}BillingState" callbackMethodName="{!uniqueId}CountryStateDropDownChangeCallBack"
                                            selectedCountryValue="{!JSENCODE(customer.BillingCountry)}" selectedStateValue="{!JSENCODE(customer.BillingState)}" />
                </td>
                
                <td colspan="2">
                    <input type="text" id="{!uniqueId}Email__c" class="k-input k-textbox requiredField" 
                            placeholder="Email" accApi="Email__c" conApi="Email" title="Email"/>
                    <script>
                        $("#{!uniqueId}Email__c").val('{!JSENCODE(customer.Email__c)}');
                        $("#{!uniqueId}Email__c").focusout(function() {
                            var emailStr = $(this).val().trim();
                            $(this).val(emailStr);
                            var validationErr = {!uniqueId}validateEmail();
                        });
                        
                        $("#{!uniqueId}Email__c").change(function() {
                            {!uniqueId}IsFormModified = true;
                        });
                        
                        // Validation method for "Email"
                        function {!uniqueId}validateEmail(){
                            var emailRegEx = /^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/;
                            var emailStr = $("#{!uniqueId}Email__c").val().trim();
                            
                            var validationErr;
                            if(emailStr.length == 0){
                                validationErr = "Required";
                            }else if( emailRegEx.test(emailStr) ){
                                validationErr = null;
                            }else{
                                validationErr = "Invalid";
                            }
                            
                            $("#{!uniqueId}EmailErr").remove();
                            if(validationErr != null){
                                $("<font>", {id: "{!uniqueId}EmailErr", class: "errDiv", text: validationErr, click: function () {}}).insertAfter("#{!uniqueId}Email__c");
                            }else{
                            }
                            
                            return validationErr;
                        }
                    </script>
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <input type="text" id="{!uniqueId}BillingPostalCode" class="k-input k-textbox requiredField" maxlength="6" 
                            placeholder="Postal/Zip Code" accApi="BillingPostalCode" conApi="MailingPostalCode" title="Postal/Zip Code"/>
                    <script>
                        $("#{!uniqueId}BillingPostalCode").val('{!JSENCODE(customer.BillingPostalCode)}');
                        $("#{!uniqueId}BillingPostalCode").focusout(function() {
                            var billingPostalCode = $(this).val().trim();
                            $(this).val(billingPostalCode);
                            var validationErr = {!uniqueId}validateBillingPostalCode();
                        });
                        
                        $("#{!uniqueId}BillingPostalCode").change(function() {
                            {!uniqueId}IsFormModified = true;
                        });
                        
                        $('#{!uniqueId}BillingPostalCode').keyup(function(){
                            this.value = this.value.toUpperCase();
                        });
                        
                        // Validation method for "validateBillingPostalCode"
                        function {!uniqueId}validateBillingPostalCode(){
                            var billingPostalCodeFieldRegEx = /^[a-zA-Z0-9 ]{4,6}$/;
                            var billingPostalCode = $("#{!uniqueId}BillingPostalCode").val().trim();
                            
                            var validationErr;
                            if(billingPostalCode.length == 0){
                                validationErr = "Required";
                            }else if( billingPostalCodeFieldRegEx.test(billingPostalCode) ){
                                validationErr = null;
                            }else{
                                validationErr = "Invalid";
                            }
                            
                            $("#{!uniqueId}BillingPostalCodeErr").remove();
                            if(validationErr != null){
                                $("<font>", {id: "{!uniqueId}BillingPostalCodeErr", class: "errDiv", text: validationErr, click: function () {}}).insertAfter("#{!uniqueId}BillingPostalCode");
                            }else{
                            }
                            
                            return validationErr;
                        }
                    </script>
                </td>
                
                <td colspan="2">
                    <input type="text" id="{!uniqueId}PreferredMethod" accApi="Preferred_Contact__c" conApi="Preferred_Contact__c" 
                            title="Preferred method to contact" style="width: 40%;"/>
                    <c:SObjectFieldDropdown uniqueId="PreferredContact" elementId="{!uniqueId}PreferredMethod" callbackMethodName="{!uniqueId}PreferredContactonChangeDropDown"
                        sObjName="Account" fieldName="Preferred_Contact__c" preSelectedValue="{!JSENCODE(customer.Preferred_Contact__c)}" />
                </td>
            </tr>
        </table>
        
        <br/><br/>
        <table width="100%">
            <col width="10%" />
            <col width="40%" />
            <col width="15%" />
            <col width="35%" />
            
            <tr>
                <td colSpan = "2">
                    <div style="float:left; width:125px; margin-top: 5px;">
                        <B>Shipping Address</B>
                    </div>
                    <div style="float:left; width:125px;">
                        <input type="checkbox" id="{!uniqueId}CopyAddress" class="k-input" title="Copy Address" accApi="SA_same_as_BA__c" conApi="SA_same_as_BA__c"
                                onClick="{!uniqueId}IsFormModified = true; {!uniqueId}copyAddressToShipping(this);"/>
                        <script>
                            $("#{!uniqueId}CopyAddress").prop('checked', {!customer.SA_same_as_BA__c});
                        </script>
                    </div>
                    <div style="clear:both"></div>
                </td>
                <td colSpan = "2">
                    <B>Other Information</B>
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <input type="text" id="{!uniqueId}ShippingStreet" class="k-input k-textbox" maxlength="255"
                            placeholder="Street" accApi="ShippingStreet" conApi="OtherStreet" title="Street"/>
                    <script>
                        $("#{!uniqueId}ShippingStreet").val('{!JSENCODE(customer.ShippingStreet)}');
                        $("#{!uniqueId}ShippingStreet").change(function() {
                            {!uniqueId}IsFormModified = true;
                        });
                    </script>
                </td>
                
                <td colspan="2">
                    <input type="text" id="{!uniqueId}VIP__c" class="k-input k-textbox requiredField" maxlength="30"
                            placeholder="VIP#" accApi="VIP__c" conApi="VIP__c" title="VIP#"/>
                    <script>
                        $("#{!uniqueId}VIP__c").val('{!JSENCODE(customer.VIP__c)}');
                        $("#{!uniqueId}VIP__c").focusout(function() {
                            var vipStr = $(this).val().trim();
                            $(this).val(vipStr);
                            var validationErr = {!uniqueId}validateVIP();
                        });
                        
                        $("#{!uniqueId}VIP__c").change(function() {
                            {!uniqueId}IsFormModified = true;
                        });
                        
                        // Validation method for "VIP#"
                        function {!uniqueId}validateVIP(){
                            var vipFieldRegEx = /^[a-zA-Z0-9 ]{0,30}$/;
                            var vipStr = $("#{!uniqueId}VIP__c").val().trim();
                            
                            var validationErr;
                            if(vipStr.length == 0){
                                validationErr = "Required";
                            }else if( vipFieldRegEx.test(vipStr) ){
                                validationErr = null;
                            }else{
                                validationErr = "Invalid";
                            }
                            
                            $("#{!uniqueId}VIPErr").remove();
                            if(validationErr != null){
                                $("<font>", {id: "{!uniqueId}VIPErr", class: "errDiv", text: validationErr, click: function () {}}).insertAfter("#{!uniqueId}VIP__c");
                            }else{
                            }
                            
                            return validationErr;
                        }
                    </script>
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <input type="text" id="{!uniqueId}ShippingCity" class="k-input k-textbox" 
                            placeholder="City" accApi="ShippingCity" conApi="OtherCity" title="City"/>
                    <script>
                        $("#{!uniqueId}ShippingCity").val('{!JSENCODE(customer.ShippingCity)}');
                        $("#{!uniqueId}ShippingCity").focusout(function() {
                            var cityStr = $(this).val().trim();
                            $(this).val(cityStr);
                            var validationErr = {!uniqueId}validateShippingCity();
                        });
                        
                        $("#{!uniqueId}ShippingCity").change(function() {
                            {!uniqueId}IsFormModified = true;
                        });
                        
                        // Validation method for "ShippingCity"
                        function {!uniqueId}validateShippingCity(){
                            var shippingCityRegEx = /^[a-zA-Z ]{0,80}$/;
                            var shippingCityStr = $("#{!uniqueId}ShippingCity").val().trim();
                            
                            var validationErr;
                            if( !shippingCityRegEx.test(shippingCityStr) ){
                                validationErr = "Invalid";
                            }
                            
                            $("#{!uniqueId}ShippingCityErr").remove();
                            if(validationErr != null){
                                $("<font>", {id: "{!uniqueId}ShippingCityErr", class: "errDiv", text: validationErr, click: function () {}}).insertAfter("#{!uniqueId}ShippingCity");
                            }else{
                            }
                            
                            return validationErr;
                        }
                    </script>
                </td>
                
                <td colspan="2">
                    <input type="text" id="{!uniqueId}PriceLevel" accApi="Price_Level__c" conApi="Price_Level__c" 
                            title="Price Level" style="width: 40%;"/>
                    
                    <c:SObjectLookupDropdown uniqueId="PriceLevel" elementId="{!uniqueId}PriceLevel" callbackMethodName="{!uniqueId}PriceLevelChangeDropDown"
                        sObjName="Price_Level__c" displayFieldName="Name__c" preSelectedValue="{!JSENCODE(customer.Price_Level__c)}" />
                    
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <input type="text" id="{!uniqueId}ShippingCountry" accApi="ShippingCountry" conApi="OtherCountry" title="Country" style="width: 40%;"/>
                </td>
                
                <td colspan="2">
                    <input type="text" id="{!uniqueId}SalesTax" accApi="Sales_Tax__c" conApi="Sales_Tax__c" 
                            title="Sales Tax" style="width: 40%;"/>
                    
                    <c:SObjectLookupDropdown uniqueId="SalesTax" elementId="{!uniqueId}SalesTax" callbackMethodName="{!uniqueId}SalesTaxChangeDropDown"
                        sObjName="Sales_Tax__c" displayFieldName="Name__c" preSelectedValue="{!JSENCODE(customer.Sales_Tax__c)}" />
                    
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <input type="text" id="{!uniqueId}ShippingState" accApi="ShippingState" conApi="OtherState" title="State" style="width: 40%;"/>
                    <c:CountryStateDropdown uniqueId="Shipping" countryElemId="{!uniqueId}ShippingCountry" stateElemId="{!uniqueId}ShippingState" callbackMethodName="{!uniqueId}CountryStateDropDownChangeCallBack"
                                            selectedCountryValue="{!JSENCODE(customer.ShippingCountry)}" selectedStateValue="{!JSENCODE(customer.ShippingState)}" />
                </td>
                
                <td rowSpan="1">    <label>Is Vendor</label>    </td>
                <td rowSpan="1">
                    <input type="checkbox" id="{!uniqueId}Is_Vendor__c" class="k-input " accApi="Is_Vendor__c" conApi="Is_Vendor__c" disabled='disabled'/>
                    <script>
                        $("#{!uniqueId}Is_Vendor__c").prop('checked', {!customer.Is_Vendor__c});
                        $("#{!uniqueId}Is_Vendor__c").change(function() {
                            {!uniqueId}IsFormModified = true;
                        });
                    </script>
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <input type="text" id="{!uniqueId}ShippingPostalCode" class="k-input k-textbox requiredField" maxlength="6" 
                            placeholder="Postal/Zip Code" accApi="ShippingPostalCode" conApi="OtherPostalCode" title="Postal/Zip Code"/>
                    <script>
                        $("#{!uniqueId}ShippingPostalCode").val('{!JSENCODE(customer.ShippingPostalCode)}');
                        $("#{!uniqueId}ShippingPostalCode").focusout(function() {
                            var shippingPostalCode = $(this).val().trim();
                            $(this).val(shippingPostalCode);
                            var validationErr = {!uniqueId}validateShippingPostalCode();
                        });
                        
                        $('#{!uniqueId}ShippingPostalCode').keyup(function(){
                            this.value = this.value.toUpperCase();
                        });
                        
                        $("#{!uniqueId}ShippingPostalCode").change(function() {
                            {!uniqueId}IsFormModified = true;
                        });
                        
                        // Validation method for "validateShippingPostalCode"
                        function {!uniqueId}validateShippingPostalCode(){
                            var shippingPostalCodeFieldRegEx = /^[a-zA-Z0-9 ]{4,6}$/;
                            var shippingPostalCode = $("#{!uniqueId}ShippingPostalCode").val().trim();
                            
                            var validationErr;
                            if(shippingPostalCode.length == 0){
                                validationErr = "Required";
                            }else if( shippingPostalCodeFieldRegEx.test(shippingPostalCode) ){
                                validationErr = null;
                            }else{
                                validationErr = "Invalid";
                            }
                            
                            $("#{!uniqueId}ShippingPostalCodeErr").remove();
                            if(validationErr != null){
                                $("<font>", {id: "{!uniqueId}ShippingPostalCodeErr", class: "errDiv", text: validationErr, click: function () {}}).insertAfter("#{!uniqueId}ShippingPostalCode");
                            }else{
                            }
                            
                            return validationErr;
                        }
                    </script>
                </td>
                
                <td rowSpan="1">    <label>Active Customer</label>  </td>
                <td rowSpan="1">
                    <div style="float: left; padding-top: 5px;">
                        <input type="checkbox" id="{!uniqueId}Active__c" class="k-input" checked="checked" accApi="Active__c" conApi="Active__c"/>
                    </div>
                    <div style="float: right;">
                        <input id="{!uniqueId}CustomerSaveButton" type="button" value="Save" onClick="{!uniqueId}saveCustomerRecord();" class="k-button customerDetailButton"/>
                    </div>
                    <script>
                        {!uniqueId}SetActiveCheckboxTooltip();
                        
                        if({!uniqueId}customerId.length != 0) {
                            $('#{!uniqueId}Active__c').prop('checked', {!customer.Active__c});
                        }
                        $("#{!uniqueId}Active__c").change(function() {
                            {!uniqueId}IsFormModified = true;
                            
                            {!uniqueId}SetActiveCheckboxTooltip();
                        });
                        
                        // Set tooltip for Active checkbox
                        function {!uniqueId}SetActiveCheckboxTooltip(){
                            var activeElem = $('#{!uniqueId}Active__c');
                            var isActive = activeElem.is(':checked');
                            if(isActive){
                                activeElem.attr("title", "Active");
                            }else{
                                activeElem.attr("title", "In-Active");
                            }
                        }
                    </script>
                </td>
            </tr>
        </table>
    </body>
    
    <script>
        // Method used to copy Billing address to shipping address
        function {!uniqueId}copyAddressToShipping(element){
            if(element.checked) {
                $("#{!uniqueId}ShippingStreet").attr('disabled', 'disabled');
                $("#{!uniqueId}ShippingCity").attr('disabled', 'disabled');
                $("#{!uniqueId}ShippingPostalCode").attr('disabled', 'disabled');
                $("#{!uniqueId}ShippingCountry").data("kendoDropDownList").enable(false);
                $("#{!uniqueId}ShippingState").data("kendoDropDownList").enable(false);
                $("#{!uniqueId}ShippingPostalCodeErr").remove();
            } else {
                $("#{!uniqueId}ShippingStreet").removeAttr('disabled', 'disabled');
                $("#{!uniqueId}ShippingCity").removeAttr('disabled', 'disabled');
                $("#{!uniqueId}ShippingPostalCode").removeAttr('disabled', 'disabled');
                $("#{!uniqueId}ShippingCountry").data("kendoDropDownList").enable(true);
                $("#{!uniqueId}ShippingState").data("kendoDropDownList").enable(true);
            }
        }
        
        // Method used to validate Billing address
        function {!uniqueId}validateBillingAddress(){
            var validationErr = {!uniqueId}validateBillingPostalCode();
            if(validationErr == null){
                validationErr = {!uniqueId}validateBillingCity();
            }
            
            if(validationErr == null){
                return true;
            }
            
            return false;
        }
        
        // Method to validate if selected preferred contact is not empty
        function {!uniqueId}validateSelectedContactMethod(){
            var selectedContactMethod = $("#{!uniqueId}PreferredMethod").data("kendoDropDownList").text();
            var selectedContact = $("input[placeHolder='"+selectedContactMethod+"'][Id*='{!uniqueId}']");
            
            $("#{!uniqueId}PreferredContactErr").remove();
            if(selectedContact.val().trim().length == 0){
                validationErr = "Cannot be empty since preferred contact";
                $("<font>", {id: "{!uniqueId}PreferredContactErr", class: "errDiv", text: validationErr, click: function () {}}).insertAfter(selectedContact);
                selectedContact.attr("prevErrElem", "Error");
            }else{
                validationErr = null;
            }
            
            return validationErr;
        }
        
        // method to save the customer record
        function {!uniqueId}saveCustomerRecord(){
            if({!uniqueId}validateForm()){
                // Disable Save button
                $("#{!uniqueId}CustomerSaveButton").attr("disabled", "disabled");
                
                {!uniqueId}createCustomerJSON();
                var customerRecValue = JSON.stringify({!uniqueId}customerJSONRecord);
                saveCustomerDetails({!uniqueId}customerId, {!uniqueId}selectedCustomerType, customerRecValue, "{!uniqueId}", {!uniqueId}CustomerSaveCallBack);
                {!uniqueId}IsFormModified = false;
                $("#{!uniqueId}BusinessType").attr('disabled',true);
                $("#{!uniqueId}IndividualType").attr('disabled',true);
            }
            
            // Enable Save button
            $("#{!uniqueId}CustomerSaveButton").removeAttr("disabled");
        }
        
        // Save callback method for customer
        function {!uniqueId}CustomerSaveCallBack(savedCustomerId){
            {!uniqueId}customerId = savedCustomerId;
        }
        
        // method to check if any changes in the form and then remove tab
        function {!uniqueId}preRemoveSelecedTab(selectedTab, selectedCustomerId){
            anyChangesInCustomerClosingTab = {!uniqueId}IsFormModified;
            selectedCustomerId = (selectedCustomerId == null || selectedCustomerId == "null" || selectedCustomerId.length == 0) ? {!uniqueId}customerId : selectedCustomerId;
            removeSelecedTab(selectedTab, selectedCustomerId, anyChangesInCustomerClosingTab);
        }
        
        // Method to validate form, returns true if validated successfully
        function {!uniqueId}validateForm(){
            var sucessfullyValidated = true;
            var validationErr;
            
            if({!uniqueId}attrAPIField == "conAPI"){
                // Validate FirstName:
                validationErr = {!uniqueId}validateFirstName();
                if(validationErr != null){
                    sucessfullyValidated = false;
                }
                
                // Validate LastName:
                validationErr = {!uniqueId}validateLastName();
                if(validationErr != null){
                    sucessfullyValidated = false;
                }
            }else{
                // Validate BusinessName:
                validationErr = {!uniqueId}validateBusinessName();
                if(validationErr != null){
                    sucessfullyValidated = false;
                }
            }
            
            // Validate Phone:
            validationErr = {!uniqueId}validatePhone();
            if(validationErr != null){
                sucessfullyValidated = false;
            }
            
            // Validate Mobile:
            validationErr = {!uniqueId}validateMobile();
            if(validationErr != null){
                sucessfullyValidated = false;
            }
            
            // Validate Fax:
            validationErr = {!uniqueId}validateFax();
            if(validationErr != null){
                sucessfullyValidated = false;
            }
            
            // Validate Email:
            validationErr = {!uniqueId}validateEmail();
            if(validationErr != null){
                sucessfullyValidated = false;
            }
            
            // Validate VIP#:
            validationErr = {!uniqueId}validateVIP();
            if(validationErr != null){
                sucessfullyValidated = false;
            }
            
            // Validate BillingPostalCode:
            validationErr = {!uniqueId}validateBillingPostalCode();
            if(validationErr != null){
                sucessfullyValidated = false;
            }
            
            /// Validate ShippingPostalCode:
            if($('#{!uniqueId}CopyAddress').checked == false) {
                validationErr = {!uniqueId}validateShippingPostalCode();
                if(validationErr != null){
                    sucessfullyValidated = false;
                }   
            }

            // Validate selected preferred contact method:
            validationErr = {!uniqueId}validateSelectedContactMethod();
            if(validationErr != null){
                sucessfullyValidated = false;
            }
            return sucessfullyValidated;
        }
        
        // Method to create a JSON objct for all fields
        function {!uniqueId}createCustomerJSON(){
            {!uniqueId}customerJSONRecord = {};
            
            if({!uniqueId}customerId.length != 0){
                {!uniqueId}customerJSONRecord[ {!uniqueId}processingFieldsMap["Id"] ] = {!uniqueId}customerId;
            }
            
            fieldJQElem = $("#{!uniqueId}NameDiv > input[id='{!uniqueId}BusinessName']");
            if(fieldJQElem.val() != null){
                fieldJSONStr = fieldJQElem.val().trim();
            }else{
                fieldJSONStr = $("#{!uniqueId}NameDiv > input[id='{!uniqueId}FirstName']").val().trim() + " " + $("#{!uniqueId}NameDiv > input[id='{!uniqueId}LastName']").val().trim();
            }
            {!uniqueId}customerJSONRecord[ {!uniqueId}processingFieldsMap["Name"] ] = fieldJSONStr;
            
            try{
                fieldJQElem = $("#{!uniqueId}NameDiv > input[id='{!uniqueId}FirstName']");
                fieldJSONStr = fieldJQElem.val().trim();
                {!uniqueId}customerJSONRecord[ {!uniqueId}processingFieldsMap[fieldJQElem.attr({!uniqueId}attrAPIField)] ] = fieldJSONStr;
                
                fieldJQElem = $("#{!uniqueId}NameDiv > input[id='{!uniqueId}LastName']");
                fieldJSONStr = fieldJQElem.val().trim();
                {!uniqueId}customerJSONRecord[ {!uniqueId}processingFieldsMap[fieldJQElem.attr({!uniqueId}attrAPIField)] ] = fieldJSONStr;
            }catch(ex){}
            
            fieldJQElem = $("#{!uniqueId}Phone");
            fieldJSONStr = fieldJQElem.val().trim();
            {!uniqueId}customerJSONRecord[ {!uniqueId}processingFieldsMap[fieldJQElem.attr({!uniqueId}attrAPIField)] ] = fieldJSONStr;
            
            fieldJQElem = $("#{!uniqueId}Mobile__c");
            fieldJSONStr = fieldJQElem.val().trim();
            {!uniqueId}customerJSONRecord[ {!uniqueId}processingFieldsMap[fieldJQElem.attr({!uniqueId}attrAPIField)] ] = fieldJSONStr;
            
            fieldJQElem = $("#{!uniqueId}Fax");
            fieldJSONStr = fieldJQElem.val().trim();
            {!uniqueId}customerJSONRecord[ {!uniqueId}processingFieldsMap[fieldJQElem.attr({!uniqueId}attrAPIField)] ] = fieldJSONStr;
            
            fieldJQElem = $("#{!uniqueId}Email__c");
            fieldJSONStr = fieldJQElem.val().trim();
            {!uniqueId}customerJSONRecord[ {!uniqueId}processingFieldsMap[fieldJQElem.attr({!uniqueId}attrAPIField)] ] = fieldJSONStr;
            
            fieldJQElem = $("#{!uniqueId}BillingCountry");
            fieldJSONStr = fieldJQElem.data("kendoDropDownList").text();
            {!uniqueId}customerJSONRecord[ {!uniqueId}processingFieldsMap[fieldJQElem.attr({!uniqueId}attrAPIField)] ] = fieldJSONStr;
            
            fieldJQElem = $("#{!uniqueId}BillingState");
            fieldJSONStr = fieldJQElem.data("kendoDropDownList").text();
            {!uniqueId}customerJSONRecord[ {!uniqueId}processingFieldsMap[fieldJQElem.attr({!uniqueId}attrAPIField)] ] = fieldJSONStr;
            
            fieldJQElem = $("#{!uniqueId}BillingStreet");
            fieldJSONStr = fieldJQElem.val().trim();
            {!uniqueId}customerJSONRecord[ {!uniqueId}processingFieldsMap[fieldJQElem.attr({!uniqueId}attrAPIField)] ] = fieldJSONStr;
            
            fieldJQElem = $("#{!uniqueId}BillingCity");
            fieldJSONStr = fieldJQElem.val().trim();
            {!uniqueId}customerJSONRecord[ {!uniqueId}processingFieldsMap[fieldJQElem.attr({!uniqueId}attrAPIField)] ] = fieldJSONStr;
            
            fieldJQElem = $("#{!uniqueId}BillingPostalCode");
            fieldJSONStr = fieldJQElem.val().trim();
            {!uniqueId}customerJSONRecord[ {!uniqueId}processingFieldsMap[fieldJQElem.attr({!uniqueId}attrAPIField)] ] = fieldJSONStr;
            
            var fieldAddSameElem = $("#{!uniqueId}CopyAddress");
            var isShippingAddSameAsBilling = fieldAddSameElem.is(':checked');
            
            fieldJQElem = $("#{!uniqueId}ShippingCountry");
            fieldJSONStr = ((isShippingAddSameAsBilling) ? $("#{!uniqueId}BillingCountry") : fieldJQElem).data("kendoDropDownList").text();
            {!uniqueId}customerJSONRecord[ {!uniqueId}processingFieldsMap[fieldJQElem.attr({!uniqueId}attrAPIField)] ] = fieldJSONStr;
            
            fieldJQElem = $("#{!uniqueId}ShippingState");
            fieldJSONStr = ((isShippingAddSameAsBilling) ? $("#{!uniqueId}BillingState") : fieldJQElem).data("kendoDropDownList").text();
            {!uniqueId}customerJSONRecord[ {!uniqueId}processingFieldsMap[fieldJQElem.attr({!uniqueId}attrAPIField)] ] = fieldJSONStr;
            
            fieldJQElem = $("#{!uniqueId}ShippingStreet");
            fieldJSONStr = (isShippingAddSameAsBilling) ? $("#{!uniqueId}BillingStreet").val().trim() : fieldJQElem.val().trim();
            {!uniqueId}customerJSONRecord[ {!uniqueId}processingFieldsMap[fieldJQElem.attr({!uniqueId}attrAPIField)] ] = fieldJSONStr;

            fieldJQElem = $("#{!uniqueId}ShippingCity");
            fieldJSONStr = (isShippingAddSameAsBilling) ? $("#{!uniqueId}BillingCity").val().trim() : fieldJQElem.val().trim();
            {!uniqueId}customerJSONRecord[ {!uniqueId}processingFieldsMap[fieldJQElem.attr({!uniqueId}attrAPIField)] ] = fieldJSONStr;
            
            fieldJQElem = $("#{!uniqueId}ShippingPostalCode");
            fieldJSONStr = (isShippingAddSameAsBilling) ? $("#{!uniqueId}BillingPostalCode").val().trim() : fieldJQElem.val().trim();
            {!uniqueId}customerJSONRecord[ {!uniqueId}processingFieldsMap[fieldJQElem.attr({!uniqueId}attrAPIField)] ] = fieldJSONStr;
            
            fieldJQElem = $("#{!uniqueId}VIP__c");
            fieldJSONStr = fieldJQElem.val().trim();
            {!uniqueId}customerJSONRecord[ {!uniqueId}processingFieldsMap[fieldJQElem.attr({!uniqueId}attrAPIField)] ] = fieldJSONStr;
            
            fieldJQElem = $("#{!uniqueId}Active__c");
            fieldJSONStr = fieldJQElem.is(':checked');
            {!uniqueId}customerJSONRecord[ {!uniqueId}processingFieldsMap[fieldJQElem.attr({!uniqueId}attrAPIField)] ] = fieldJSONStr;
            
            fieldJQElem = $("#{!uniqueId}CopyAddress");
            fieldJSONStr = fieldJQElem.is(':checked');
            {!uniqueId}customerJSONRecord[ {!uniqueId}processingFieldsMap[fieldJQElem.attr({!uniqueId}attrAPIField)] ] = fieldJSONStr;
            
            fieldJQElem = $("#{!uniqueId}Is_Vendor__c");
            fieldJSONStr = fieldJQElem.is(':checked');
            {!uniqueId}customerJSONRecord[ {!uniqueId}processingFieldsMap[fieldJQElem.attr({!uniqueId}attrAPIField)] ] = fieldJSONStr;
            
            fieldJQElem = $("#{!uniqueId}PreferredMethod");
            fieldJSONStr = fieldJQElem.data("kendoDropDownList").text();
            {!uniqueId}customerJSONRecord[ {!uniqueId}processingFieldsMap[fieldJQElem.attr({!uniqueId}attrAPIField)] ] = fieldJSONStr;
            
            fieldJQElem = $("#{!uniqueId}PriceLevel");
            fieldJSONStr = fieldJQElem.data("kendoDropDownList").value();
            {!uniqueId}customerJSONRecord[ {!uniqueId}processingFieldsMap[fieldJQElem.attr({!uniqueId}attrAPIField)] ] = fieldJSONStr;
            
            fieldJQElem = $("#{!uniqueId}SalesTax");
            fieldJSONStr = fieldJQElem.data("kendoDropDownList").value();
            {!uniqueId}customerJSONRecord[ {!uniqueId}processingFieldsMap[fieldJQElem.attr({!uniqueId}attrAPIField)] ] = fieldJSONStr;
        }
    </script>
</apex:component>